(self.webpackChunksubscription_central=self.webpackChunksubscription_central||[]).push([[695],{67073:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var a=n(94015),r=n.n(a),l=n(23645),i=n.n(l)()(r());i.push([e.id,".manifests :root{--ins-color--orange: #ec7a08}.manifests button:focus{outline:none}\n","",{version:3,sources:["webpack://./src/App.scss"],names:[],mappings:"AAAA,iBACM,4BAAoB,CAD1B,wBACgD,YAAY",sourcesContent:[".manifests{\n:root{--ins-color--orange: #ec7a08}button:focus{outline:none}\n\n}"],sourceRoot:""}]);const o=i},50417:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var a=n(77865),r=n.n(a),l=n(334),i=n(43476),o=n(83161),s=n(41011),c=n(20167);const u=function(e){var t=e.children,n=(0,a.useState)({status:"loading",isOrgAdmin:null}),i=n[0],u=n[1],m={user:i,setUser:u},d=(0,l.useLocation)();return(0,a.useEffect)((function(){u({status:"loading",isOrgAdmin:null}),function(){try{return window.insights.chrome.auth.getUser()}catch(e){throw new Error("Error authenticating user: "+e.message)}}().then((function(e){u({status:"loaded",isOrgAdmin:e.identity.user.is_org_admin})})).catch((function(){u({status:"error",isOrgAdmin:null})}))}),[d.pathname]),r().createElement(s.Z.Provider,{value:m},"loading"===i.status&&r().createElement(o.qb,null),"loaded"===i.status&&t,"error"===i.status&&r().createElement(c.Z,null))};var m=(0,a.lazy)((function(){return Promise.all([n.e(410),n.e(252),n.e(184),n.e(361)]).then(n.bind(n,58361))})),d=(0,a.lazy)((function(){return Promise.all([n.e(252),n.e(184),n.e(582)]).then(n.bind(n,53582))})),p=(0,a.lazy)((function(){return Promise.all([n.e(410),n.e(252),n.e(184),n.e(309)]).then(n.bind(n,92309))})),f=function(){return r().createElement("div",{className:"manifests"},r().createElement(a.Suspense,{fallback:r().createElement(o.qb,null)},r().createElement(u,null,r().createElement(l.Switch,null,r().createElement(l.Route,{exact:!0,path:"/",component:m}),r().createElement(l.Route,{path:"/oops",component:d}),r().createElement(l.Route,{path:"/no-permissions",component:p}),r().createElement(l.Route,null,r().createElement(l.Redirect,{to:"/oops"}))))))},h=(n(14154),n(8738)),E=n(24685),v=n(83215),g=n(88767),y=n(87323),b=new y.S({defaultOptions:{queries:{retry:3,retryDelay:1e4,staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1}}});const S=(0,l.withRouter)((0,i.connect)()((function(e){return(0,a.useEffect)((function(){return(0,h.JH)().register({notifications:v.ee}),insights.chrome.init(),insights.chrome.identifyApp("manifests"),insights.chrome.on("APP_NAVIGATION",(function(e){return undefined.props.history.push("/".concat(e.navId))}))}),[]),r().createElement(g.QueryClientProvider,{client:b},r().createElement(E.ZP,null),r().createElement(f,{childProps:e}))})))},83161:(e,t,n)=>{"use strict";n.d(t,{s3:()=>s,Ox:()=>u,qx:()=>m,qb:()=>d});var a=n(77865),r=n.n(a),l=n(17345),i=n(58631),o=n(20777);const s=function(){return r().createElement(l.EmptyState,{variant:l.EmptyStateVariant.large},r().createElement(l.EmptyStateIcon,{icon:o.wl}),r().createElement(l.Title,{headingLevel:"h2",size:"lg"},"Create a new manifest to export subscriptions"),r().createElement(l.EmptyStateBody,null,"You currently have no manifests displayed. Create a new manifest to export subscriptions from the Red Hat Customer Portal to your on-premise subscription management application."),r().createElement(i.Z,null))};var c=n(71070);const u=function(){return r().createElement(l.EmptyState,{variant:l.EmptyStateVariant.small},r().createElement(l.EmptyStateIcon,{icon:c.ZP}),r().createElement(l.Title,{headingLevel:"h2",size:"lg"},"No manifests found"),r().createElement(l.EmptyStateBody,null,"No manifests were found under your account."))},m=function(e){var t=e.clearFilters;return r().createElement(l.EmptyState,{variant:l.EmptyStateVariant.small},r().createElement(l.EmptyStateIcon,{icon:c.ZP}),r().createElement(l.Title,{headingLevel:"h2",size:"lg"},"No results found"),r().createElement(l.EmptyStateBody,null,"No results match the filter criteria. Remove all filters or clear all filters to show results."),r().createElement(l.Button,{variant:"link",onClick:t},"Clear all filters"))},d=function(){return r().createElement(l.Bullseye,null,r().createElement(l.Spinner,null))}},55206:(e,t,n)=>{"use strict";n.d(t,{S1:()=>o});var a=n(8738),r=n(68573),l=n.n(r),i=n(84885);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.JH)({},[l(),(0,i.ZP)({errorDescriptionKey:["detail","stack"]})].concat(t))}},14154:(e,t,n)=>{"use strict";var a=n(93379),r=n.n(a),l=n(67073),i=r()(l.default,{insert:"head",singleton:!1});if(!l.default.locals||e.hot.invalidate){var o=l.default.locals;e.hot.accept(67073,(t=>{l=n(67073),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(o,l.default.locals)?(o=l.default.locals,i(l.default)):e.hot.invalidate()}))}e.hot.dispose((function(){i()})),l.default.locals},41011:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=(0,n(77865).createContext)({user:{isOrgAdmin:null,status:"loading"},setUser:function(){}})},58631:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var a=n(77865),r=n.n(a),l=n(17345),i=n(42283),o=n(84564),s=n(34046);const c=function(){return r().createElement(l.EmptyState,{variant:l.EmptyStateVariant.small},r().createElement(l.EmptyStateIcon,{icon:o.ZP,color:"var(--pf-global--danger-color--100)"}),r().createElement(l.Title,{headingLevel:"h3"},"Something went wrong"),r().createElement(l.EmptyStateBody,null,r().createElement("h4",null,"Try refreshing the page. If the problem persists, contact your organization administrator or visit our"," ",r().createElement(l.Button,{variant:"link",component:"a",href:"https://status.redhat.com/",target:"_blank",isInline:!0},"status page")," ","for known outages.")))};var u=n(83161);const m=function(e){var t=e.title;return r().createElement(l.EmptyState,{variant:l.EmptyStateVariant.small},r().createElement(l.Title,{headingLevel:"h3"},t),r().createElement(l.EmptyStateBody,null,r().createElement(u.qb,null)))};var d=n(35451);const p=function(e){var t=e.manifestName,n=e.handleModalToggle;return r().createElement(l.EmptyState,{variant:l.EmptyStateVariant.small},r().createElement(l.EmptyStateIcon,{icon:d.ZP,color:"var(--pf-global--success-color--100)"}),r().createElement(l.Title,{headingLevel:"h3"},"Success"),r().createElement(l.EmptyStateBody,null,r().createElement("h4",null,"Your new manifest, ",r().createElement("strong",null,t),", has been successfully created."),r().createElement(l.Button,{key:"close-window",variant:"primary",onClick:n,style:{marginTop:"20px"}},"Return to page")))};var f=function(){return(f=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};const h=function(e){var t=e.satelliteVersions,n=e.handleModalToggle,u=e.submitForm,d=e.isLoading,h=e.isError,E=e.isSuccess,v=(0,i.cI)({mode:"onBlur"}),g=v.control,y=v.handleSubmit,b=v.formState.errors,S=(0,a.useState)(""),w=S[0],T=S[1],A=function(e){var t=e.satelliteManifestName,n=e.satelliteManifestType;u(t,n),T(t)},C=!1===d&&!1===h&&!1===E;return r().createElement(r().Fragment,null,C&&function(){var e,a;return r().createElement(r().Fragment,null,r().createElement(l.Title,{headingLevel:"h3",size:"2xl"},"Create new manifest"),r().createElement("p",{style:{margin:"30px 0"}},"Creating a new manifest allows you to export subscriptions to your on-premise subscription management application."),r().createElement(l.Form,{isWidthLimited:!0},r().createElement(l.FormGroup,{label:"Name",helperTextInvalid:null===(e=b.satelliteManifestName)||void 0===e?void 0:e.message,helperTextInvalidIcon:r().createElement(o.ZP,null),validated:b.satelliteManifestName?"error":"default",labelIcon:r().createElement(l.Tooltip,{position:"top",content:r().createElement("div",null,"Provide a name that will help you associate this manifest with a specific organization or on-premise subscription management application.")},r().createElement("span",{tabIndex:0,"aria-label":"Provide a name that will help you associate this manifest with a specific\n                organization or on-premise subscription management application."},r().createElement(s.ZP,null))),isRequired:!0,fieldId:"create-satellite-manifest-form-name"},r().createElement(i.Qr,{name:"satelliteManifestName",control:g,defaultValue:"",rules:{required:"Please provide a name for your new manifest",maxLength:{value:99,message:"Your manifest name must be less than 100 characters"},pattern:{value:/^[0-9A-Za-z_.-]*$/,message:"Your manifest name may contain\n                  only numbers, letters, underscores, hyphens, and periods."}},render:function(e){var t=e.field;return r().createElement(l.TextInput,f({isRequired:!0,type:"text",id:"create-satellite-manifest-form-name",placeholder:"Name"},t))}})),r().createElement(l.FormGroup,{label:"Type",helperTextInvalid:null===(a=b.satelliteManifestType)||void 0===a?void 0:a.message,helperTextInvalidIcon:r().createElement(o.ZP,null),validated:b.satelliteManifestType?"error":"default",labelIcon:r().createElement(l.Tooltip,{position:"top",content:r().createElement("div",null,"Due to variation in supported features, it is important to match the type and version of the subscription management application you are using.")},r().createElement("span",{tabIndex:0,"aria-label":"Due to variation in supported features, it is important to match the type and\n              version of the subscription management application you are using."},r().createElement(s.ZP,null))),isRequired:!0,fieldId:"create-satellite-manifest-form-type"},r().createElement(i.Qr,{name:"satelliteManifestType",control:g,rules:{required:"Please select a version for your new manifest"},defaultValue:"",render:function(e){var n=e.field;return r().createElement(l.FormSelect,f({"aria-label":"FormSelect Input",id:"create-satellite-manifest-form-type"},n),r().createElement(l.FormSelectOption,{isDisabled:!0,key:"Select type",value:"",label:"Select type"}),null==t?void 0:t.map((function(e){return r().createElement(l.FormSelectOption,{isDisabled:!1,key:e.value,value:e.value,label:e.description})})))}})),r().createElement(l.ActionGroup,null,r().createElement(l.Button,{key:"confirm",id:"save-manifest-button",variant:"primary",onClick:y(A)},"Save"),r().createElement(l.Button,{key:"cancel",id:"cancel-create-manifest-button",variant:"link",onClick:n},"Cancel"))))}(),d&&r().createElement(m,{title:"Creating manifest..."}),E&&r().createElement(p,{handleModalToggle:n,manifestName:w}),h&&r().createElement(c,null))};var E=n(36808),v=n.n(E),g=n(88767);const y=function(e){var t,n=e.handleModalToggle,a=e.isModalOpen,i=(0,g.useQuery)("satelliteVersions",(function(){return e=v().get("cs_jwt"),fetch("https://api.access.qa.redhat.com/management/v1/allocations/versions",{headers:{Authorization:"Bearer "+e},mode:"cors"}).then((function(e){return e.json()})).catch((function(e){console.error("Error fetching Satellite Versions",e)}));var e})),o=i.data,s=i.isLoading,c=i.isError,u=(t=(0,g.useQueryClient)(),(0,g.useMutation)((function(e){return n=(t=e).name,a=t.version,r=v().get("cs_jwt"),fetch("https://api.access.qa.redhat.com/management/v1/allocations?name="+n+"&version="+a,{method:"POST",headers:{Authorization:"Bearer "+r}}).then((function(e){if(200!==e.status)throw new Error("Status Code "+e.status+".  Error creating manifest: "+e.statusText+".  ");return e.json()})).catch((function(e){console.error(e)}));var t,n,a,r}),{onSuccess:function(){t.invalidateQueries("manifests")}})),d=u.data,p=u.mutate,f=u.isLoading,E=u.isSuccess,y=u.reset;!1===a&&!0===E&&y();var b=void 0!==d,S=E&&!b||c;return r().createElement(r().Fragment,null,r().createElement(l.Modal,{"aria-label":"Create satellite manifest",variant:l.ModalVariant.medium,isOpen:a,onClose:n},s&&r().createElement(m,{title:"Loading..."}),!s&&r().createElement(h,{satelliteVersions:null==o?void 0:o.body,submitForm:function(e,t){p({name:e,version:t})},isLoading:f,isError:S,isSuccess:b,handleModalToggle:n})))},b=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1],i=function(){n(!t)};return r().createElement(r().Fragment,null,r().createElement(l.Button,{variant:"primary",onClick:i},"Create new manifest"),r().createElement(y,{handleModalToggle:i,isModalOpen:t}))}}}]);
//# sourceMappingURL=695.12e2a64d3f3228b84ee1.js.map