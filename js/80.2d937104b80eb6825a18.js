/*! For license information please see 80.2d937104b80eb6825a18.js.LICENSE.txt */
(self.webpackChunksubscription_central=self.webpackChunksubscription_central||[]).push([[80],{470:(e,t,n)=>{"use strict";t.mq={name:"ExternalLinkAltIcon",height:512,width:512,svgPath:"M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z",yOffset:0,xOffset:0},t.LA=n(5183).I(t.mq),t.ZP=t.LA},7673:(e,t,n)=>{"use strict";t.gZ={name:"QuestionCircleIcon",height:512,width:512,svgPath:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",yOffset:0,xOffset:0},t.pT=n(5183).I(t.gZ),t.pT},2112:(e,t,n)=>{"use strict";t.MS={name:"WrenchIcon",height:512,width:512,svgPath:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z",yOffset:0,xOffset:0},t.R0=n(5183).I(t.MS),t.ZP=t.R0},2080:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ee});var r=n(8416),a=n.n(r),i=n(5893),o=n(4184),c=n.n(o);const l=a().createContext("light");var s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},s.apply(this,arguments)};const u=function(e){var t=e.className,n=e.children,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["className","children"]),a=c()(t,"pf-v5-l-page-header","pf-v5-c-page-header","pf-v5-l-page__main-section","pf-v5-c-page__main-section");return(0,i.jsx)(l.Consumer,{children:function(e){var t,o;void 0===e&&(e="light");var l=c()(((t={})["pf-m-".concat(e,"-200")]="dark"===e,t),((o={})["pf-m-light"]="light"===e,o));return(0,i.jsx)("section",s({},r,{className:"".concat(a," ").concat(l),"widget-type":"InsightsPageHeader",children:n}))}})};var f=n(6201),m=n(2311),d=n(8494),p=n(8767),h=n(7255),v=function(e){var t=(0,h.dQ)();return(0,p.useQuery)(["manifestEntitlements",e],(function(){return function(e){return function(t){return n=void 0,r=void 0,i=function(){var n,r,a,i,o;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}(this,(function(c){switch(c.label){case 0:return n=fetch,r=["/api/rhsm/v2/manifests/".concat(t,"?include=entitlements")],i={},o={},a="Bearer ".concat,[4,e];case 1:return[2,n.apply(void 0,r.concat([(i.headers=(o.Authorization=a.apply("Bearer ",[c.sent()]),o),i)])).then((function(e){if(200!=e.status)throw new Error("Failed to fetch manifest entitlements: ".concat(e.statusText));return e.json()}))]}}))},new((a=Promise)||(a=Promise))((function(e,t){function o(e){try{l(i.next(e))}catch(e){t(e)}}function c(e){try{l(i.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,c)}l((i=i.apply(n,r||[])).next())}));var n,r,a,i}}(t)(e)}))};const b=function(e){var t,n=e.entitlementsRowRef,i=e.uuid,o=v(i),c=o.isError,l=o.isSuccess,s=o.isLoading,u=o.data,f=null===(t=null==u?void 0:u.body)||void 0===t?void 0:t.entitlementsAttached;(0,r.useEffect)((function(){(null==n?void 0:n.current)&&(n.current.scrollIntoView({behavior:"smooth",block:"center"}),n.current.focus({preventScroll:!0}))}),[l]);var p=function(e){if(!e)return"";var t=e.substr(0,4),n=e.substr(5,2),r=e.substr(8,2);return"".concat(t,"-").concat(n,"-").concat(r)},h=[];return(null==f?void 0:f.value)&&(h=null==f?void 0:f.value.map((function(e){var t=p(e.startDate),n=p(e.endDate);return{subscriptionName:e.subscriptionName,sku:e.sku,contractNumber:e.contractNumber,entitlementQuantity:e.entitlementQuantity,startDate:t,endDate:n}}))),a().createElement(a().Fragment,null,s&&!c&&a().createElement("div",{className:"sub-entitlement-list-loading-container"},a().createElement(d.qb,null)),l&&!f.valid&&a().createElement("div",{className:"sub-no-entitlements-reason"},a().createElement("p",{tabIndex:l?0:-1,ref:n},f.reason)),l&&f.valid&&a().createElement(m.Table,{ref:n,"aria-label":"Allocations table",variant:"compact",borders:!1,isNested:!0,className:"sub-c-table-manifests-entitlement-list",ouiaId:"entitlementTable/".concat(i),ouiaSafe:!0},a().createElement(m.Thead,null,a().createElement(m.Tr,{ouiaId:"entitlementTable/".concat(i,"/head"),ouiaSafe:!0},a().createElement(m.Th,null,"Subscription name"),a().createElement(m.Th,null,"SKU"),a().createElement(m.Th,null,"Contract number"),a().createElement(m.Th,null,"Quantity"),a().createElement(m.Th,null,"Start date"),a().createElement(m.Th,null,"End date"))),a().createElement(m.Tbody,null,h.map((function(e,t){return a().createElement(m.Tr,{key:t,ouiaId:"entitlementTable/".concat(i,"/row").concat(t),ouiaSafe:!0},a().createElement(m.Td,null,e.subscriptionName),a().createElement(m.Td,null,e.sku),a().createElement(m.Td,null,e.contractNumber),a().createElement(m.Td,null,e.entitlementQuantity),a().createElement(m.Td,null,e.startDate),a().createElement(m.Td,null,e.endDate))})))),c&&"Something went wrong.  Please refresh the page and try again.")};var E=n(7673),y=n(470);const g=function(e){var t=e.href,n=e.children;return a().createElement(f.Button,{variant:"link",component:"a",href:t,target:"_blank",isInline:!0,icon:a().createElement(y.ZP,null),iconPosition:"right"},n)},w=function(){return a().createElement(a().Fragment,null,a().createElement(f.Popover,{"aria-label":"Learn more about Simple Content Access",headerContent:"Simple Content Access",bodyContent:a().createElement("p",null,"Simple content access is a set of capabilities that enables a change in the way Red Hat manages its subscription and entitlement enforcement model. When enabled, you are allowed to consume content on your systems without strict entitlement enforcement."),footerContent:a().createElement(g,{href:"https://access.redhat.com/documentation/en-us/subscription_central/2023/html/getting_started_with_simple_content_access/con-what-is-simplecontent_assembly-simplecontent-ctxt"},"Learn more about enabling simple content access on an existing Satellite allocation and manifest")},a().createElement(E.pT,{className:"sca-more-info-icon","data-testid":"sca-more-info-icon",onClick:function(e){e.stopPropagation()}})))};var S=n(1249),x=n.n(S),C=function(e,t){return e.filter((function(e){return(e.name||"").toLowerCase().includes(t.toLowerCase().trim())||(e.version||"").toLowerCase().includes(t.toLowerCase().trim())||(e.uuid||"").toLowerCase().includes(t.toLowerCase().trim())}))},T=function(e,t){return C(e,t).length},k=function(e){return e.split(".").map((function(e){return+e+1e5})).join(".")},I=function(e,t,n,r,i,o,c,l,s,u){var f=function(e,t,n,r,a,i){var o=(n-1)*r,c=o+r;return function(e,t,n,r){var a=function(e,t){return C(e,t).map((function(e){var t=e.simpleContentAccess||"disabled",n=x().coerce(e.version),r=x().coerce("6.3");return x().lt(n,r)&&(t="disallowed"),{name:e.name,version:e.version,scaStatus:t,uuid:e.uuid}}))}(e,t),i=function(e,t,n){var r=n===m.SortByDirection.desc?-1:1;return e.sort((function(e,n){var a="version"==t?k(e.version):e[t].toLowerCase(),i="version"==t?k(n.version):n[t].toLowerCase();return a<i?-1*r:a>i?1*r:0}))}(a,n,r);return i}(e,t,a,i).slice(o,c)}(e,n,r,i,s,u),d=[];return f.forEach((function(e,t){var n=o[e.uuid]||!1,r={parent:2*(t+1)-2,content:n?a().createElement(b,{uuid:e.uuid,entitlementsRowRef:l[t]}):""};d.push({isOpen:n,cells:e,details:r})})),d},P=n(3217),D=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((r=r.apply(e,t||[])).next())}))},A=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},L=function(e){return function(t){return D(void 0,void 0,Promise,(function(){var n,r,a,i,o;return A(this,(function(c){switch(c.label){case 0:return n=fetch,r=["/api/rhsm/v2/manifests/".concat(t,"/export")],i={},o={},a="Bearer ".concat,[4,e];case 1:return[2,n.apply(void 0,r.concat([(i.headers=(o.Authorization=a.apply("Bearer ",[c.sent()]),o),i)])).then((function(e){if(200!=e.status)throw new Error("Failed to trigger export: ".concat(e.statusText));return e.json()}))]}}))}))}},O=function(e){return function(t,n){return D(void 0,void 0,Promise,(function(){var r,a,i,o,c,l;return A(this,(function(s){switch(s.label){case 0:return a=fetch,i=["/api/rhsm/v2/manifests/".concat(t,"/exportJob/").concat(n)],c={},l={},o="Bearer ".concat,[4,e];case 1:return[4,a.apply(void 0,i.concat([(c.headers=(l.Authorization=o.apply("Bearer ",[s.sent()]),l),c)]))];case 2:return 200!==(r=s.sent()).status?[3,3]:[2,r.json()];case 3:return 202!==r.status&&404!==r.status?[3,5]:[4,(5e3,new Promise((function(e){return setTimeout(e,5e3)})))];case 4:return s.sent(),[2,O(e)(t,n)];case 5:throw new Error("Error fetching status of exported manifest")}}))}))}},M=function(e){return function(t,n){return D(void 0,void 0,Promise,(function(){var r,a,i,o,c;return A(this,(function(l){switch(l.label){case 0:return r=fetch,a=["/api/rhsm/v2/manifests/".concat(t,"/export/").concat(n)],o={},c={},i="Bearer ".concat,[4,e];case 1:return[2,r.apply(void 0,a.concat([(o.headers=(c.Authorization=i.apply("Bearer ",[l.sent()]),c["Content-Type"]="application/zip",c),o)])).then((function(e){if(200!=e.status)throw new Error("Could not download manifest: ".concat(e.statusText));return e.blob()}))]}}))}))}},B=function(){var e=(0,h.dQ)();return(0,p.useMutation)((function(t){return function(e){return function(t){return D(void 0,void 0,Promise,(function(){var n,r;return A(this,(function(a){switch(a.label){case 0:return[4,L(e)(t)];case 1:return n=a.sent(),[4,O(e)(t,n.body.exportJobID)];case 2:return r=a.sent(),[4,M(e)(t,r.body.exportID)];case 3:return[2,a.sent()]}}))}))}}(e)(t.uuid)}))};const N=n(6733).Z;var _=n(4482);const G=function(e){var t=e.isExpanded,n=e.titleRef,i=e.drawerRef,o=e.uuid,c=e.onCloseClick,l=e.exportManifest,s=e.exportManifestButtonIsDisabled,u=e.openCurrentEntitlementsListFromPanel,m=e.deleteManifest,h=v(o),b=h.data,E=h.isLoading,y=h.isFetching,g=h.isSuccess,S=h.isError,x=(0,p.useQueryClient)().getQueryData("user");(0,r.useEffect)((function(){!0===t&&(C(),T())}),[t,g,E]);var C=function(){(null==n?void 0:n.current)&&n.current.scrollIntoView({behavior:"smooth",block:"start"})},T=function(){(null==i?void 0:i.current)&&i.current.focus({preventScroll:!0})},k=function(){var e=b.body,t=e.uuid,n=e.name;l(t,n),c()},I=function(){return a().createElement("div",{className:"sub-manifest-detail-drawer-loading","aria-label":"Loading Manifest Details",tabIndex:E?0:-1,ref:i},a().createElement(d.qb,null))},P=function(){return a().createElement(a().Fragment,null,a().createElement("p",{className:"sub-manifest-details-delete-text"},"Deleting a subscription allocation is ",a().createElement("strong",null,"STRONGLY")," discouraged. This action should only be taken in extreme circumstances or for debugging purposes"),a().createElement(f.Button,{variant:"tertiary",onClick:function(){m(o)},isDisabled:!x.canWriteManifests},"Delete manifest"))},D=function(){if(!(null==b?void 0:b.body))return a().createElement(_.Z,null);var e=b.body,t=e.uuid,n=e.name,r=e.version,o=e.createdDate,c=e.createdBy,l=e.lastModified,m=e.entitlementsAttachedQuantity,d=e.simpleContentAccess,p=function(e){return new Date(e).toLocaleString("en-US",{month:"long",year:"numeric",day:"2-digit",timeZone:"America/New_York"})};return a().createElement("div",null,a().createElement("h3",{tabIndex:g?0:-1,ref:i},n),a().createElement("h4",null,"Details"),a().createElement(f.Grid,null,a().createElement(f.GridItem,{span:6},a().createElement("strong",null,"Name")),a().createElement(f.GridItem,{span:6},n),a().createElement(f.GridItem,{span:6},a().createElement("strong",null,"Type")),a().createElement(f.GridItem,{span:6},"Satellite ",r),a().createElement(f.GridItem,{span:6},a().createElement("strong",null,"UUID")),a().createElement(f.GridItem,{span:6},t)),a().createElement("h4",null,"Subscriptions"),a().createElement(f.Grid,null,a().createElement(f.GridItem,{span:6},a().createElement("strong",null,"Simple content access",a().createElement(w,null))),a().createElement(f.GridItem,{span:6},!0===x.isSCACapable?d:"administratively disabled"),a().createElement(f.GridItem,{span:6},a().createElement("strong",null,"Quantity")),a().createElement(f.GridItem,{span:6},a().createElement(f.Button,{variant:"link",onClick:u,className:"sub-c-button-manifest-details-open-entitlements"},m))),a().createElement("h4",null,"History"),a().createElement(f.Grid,null,a().createElement(f.GridItem,{span:6},a().createElement("strong",null,"Created")),a().createElement(f.GridItem,{span:6},p(o)),a().createElement(f.GridItem,{span:6},a().createElement("strong",null,"Created by")),a().createElement(f.GridItem,{span:6},c),a().createElement(f.GridItem,{span:6},a().createElement("strong",null,"Last modified date")),a().createElement(f.GridItem,{span:6},p(l))),a().createElement(f.Button,{variant:"tertiary",onClick:k,isDisabled:s},"Export manifest"),a().createElement(P,null))};return a().createElement(f.DrawerPanelContent,{className:"sub-c-drawer__panel-manifest-details"},a().createElement(f.DrawerHead,null,a().createElement((function(){return!0===S?a().createElement(_.Z,null):!0===E||!0===y?a().createElement(I,null):!0===g?a().createElement(D,null):void 0}),null),a().createElement(f.DrawerActions,null,a().createElement(f.DrawerCloseButton,{onClick:function(){c()}}))))};var j=function(){var e=(0,p.useQueryClient)(),t=(0,h.dQ)();return(0,p.useMutation)((function(e){return function(e){return function(t){return n=void 0,r=void 0,i=function(){var n,r,a,i,o;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}(this,(function(c){switch(c.label){case 0:return n=fetch,r=["/api/rhsm/v2/manifests/".concat(t,"?force=true")],i={method:"DELETE"},o={},a="Bearer ".concat,[4,e];case 1:return[2,n.apply(void 0,r.concat([(i.headers=(o.Authorization=a.apply("Bearer ",[c.sent()]),o),i)])).then((function(e){if(204!=e.status)throw new Error("Status Code ".concat(e.status,".  Error deleting manifest: ").concat(e.statusText,"."))}))]}}))},new((a=void 0)||(a=Promise))((function(e,t){function o(e){try{l(i.next(e))}catch(e){t(e)}}function c(e){try{l(i.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,c)}l((i=i.apply(n,r||[])).next())}));var n,r,a,i}}(t)(e)}),{onSuccess:function(t,n){e.setQueryData("manifests",(function(e){return e.filter((function(e){return e.uuid!=n}))}))}})};const Q=function(e){var t=e.handleModalToggle,n=e.onSuccess,r=e.isOpen,i=e.name,o=e.uuid,c=a().useState(!1),l=c[0],s=c[1],u=(0,P.Z)(),m=u.addSuccessNotification,d=u.addErrorNotification,p=j(),h=p.isError,v=p.isLoading,b=p.isSuccess,E=p.mutate,y=p.reset,g=b||h,w=function(){t(),s(!1)};return b?(n(),m("Manifest ".concat(i," deleted"))):h&&d("Something went wrong. Please try again"),g&&(w(),y()),a().createElement(f.Modal,{isOpen:r,onClose:w,title:v?"Deleting manifest...":"Delete manifest?",variant:f.ModalVariant.small,titleIconVariant:"warning",actions:v?[]:[a().createElement(f.Button,{key:"confirm",variant:"danger",isDisabled:!l,onClick:function(){return E(o)}},"Delete"),a().createElement(f.Button,{key:"cancel",variant:"link",onClick:w},"Cancel")]},a().createElement((function(){return v?a().createElement(f.EmptyState,null,a().createElement(f.EmptyStateHeader,{icon:a().createElement(f.EmptyStateIcon,{icon:f.Spinner})})):a().createElement(f.TextContent,null,a().createElement(f.Text,{component:f.TextVariants.p},a().createElement("b",null,i)," will be permanently deleted, and the connection to Red Hat Insights will be broken. To enable again, you must create, export, download, and import a new manifest into your connected Satellite Server."),a().createElement(f.Checkbox,{label:"I acknowledge that this action cannot be undone",isChecked:l,id:"confirmation_checkbox",onChange:function(e){return function(e){s(e.target.checked)}(e)}}))}),null))};var F=n(4564),R=function(){return R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},R.apply(this,arguments)},V=function(){var e=(0,p.useQueryClient)(),t=(0,h.dQ)();return(0,p.useMutation)((function(e){return function(e){return function(t){return n=void 0,r=void 0,i=function(){var n,r,a,i,o,c,l,s;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}(this,(function(u){switch(u.label){case 0:return n=t.uuid,r=t.newSCAStatus,a={simpleContentAccess:r},i=fetch,o=["/api/rhsm/v2/manifests/".concat(n)],l={method:"PUT"},s={},c="Bearer ".concat,[4,e];case 1:return[2,i.apply(void 0,o.concat([(l.headers=(s.Authorization=c.apply("Bearer ",[u.sent()]),s),l.body=JSON.stringify(a),l)])).then((function(e){if(204!==e.status)throw new Error("Status Code ".concat(e.status,".  Error updating SCA status: ").concat(e.statusText,".  "));return{success:!0,status:e.status}})).catch((function(e){console.error(e)}))]}}))},new((a=Promise)||(a=Promise))((function(e,t){function o(e){try{l(i.next(e))}catch(e){t(e)}}function c(e){try{l(i.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,c)}l((i=i.apply(n,r||[])).next())}));var n,r,a,i}}(t)(e)}),{onSuccess:function(t,n){if(t){var r=n.uuid,a=n.newSCAStatus;!function(e,t,n){var r=e.getQueryData("manifests").map((function(e){if(e.uuid===t){var r=R({},e);return r.simpleContentAccess=n,r}return e}));e.setQueryData("manifests",r)}(e,r,a),function(e,t,n){var r=e.getQueryData(["manifestEntitlements",t]);if(r){var a={body:R(R({},r.body),{simpleContentAccess:n})};e.setQueryData(["manifestEntitlements",t],a)}}(e,r,a)}}})};const Z=function(e){var t=e.scaStatus,n=e.uuid,r=e.user,i="enabled"===t.toLowerCase(),o=V(),c=o.data,l=o.mutate,s=o.isLoading,u=o.isError,m=o.isSuccess,d=function(){!function(e,t){var n="enabled"===t.toLowerCase()?"disabled":"enabled";l({uuid:e,newSCAStatus:n})}(n,t)};return!0===u||m&&!c?a().createElement((function(){return a().createElement(a().Fragment,null,a().createElement(F.ZP,{color:"var(--pf-global--danger-color--100)",className:"sca-status-error-icon"}),a().createElement("span",{className:"sca-status-error-msg"},"Something went wrong. Please refresh the page and try again."))}),null):s?a().createElement((function(){return a().createElement(f.Spinner,{size:"lg",className:"sca-status-spinner"})}),null):"disallowed"==t?a().createElement((function(){return a().createElement("p",null,"N/A")}),null):a().createElement((function(){return a().createElement(f.Switch,{id:"sca-status-switch-".concat(n),"data-testid":"sca-status-switch","aria-label":"SCA Status for this Manifest is ".concat(t),isChecked:i,onChange:d,label:"Enabled",labelOff:"Disabled",isDisabled:!r.canWriteManifests})}),null)};var z=function(){return z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},z.apply(this,arguments)};const H=function(e){var t=e.data,n=e.isFetching,i=e.user,o=(0,r.useState)(1),c=o[0],l=o[1],s=(0,r.useState)(10),u=s[0],p=s[1],h=(0,r.useState)(""),v=h[0],b=h[1],E=(0,r.useState)({index:0,direction:m.SortByDirection.asc}),y=E[0],g=E[1],S=(0,r.useState)({}),x=S[0],C=S[1],k=(0,r.useState)(""),D=k[0],A=k[1],L=(0,r.useState)(!1),O=L[0],M=L[1],_=(0,r.useState)(null),j=_[0],F=_[1],R=(0,r.useState)(!1),V=R[0],H=R[1],U=(0,r.useState)(""),q=U[0],W=U[1],K=(0,r.useState)(""),Y=K[0],J=K[1],X=(0,r.useState)(!1),$=X[0],ee=X[1],te=(0,r.useState)(""),ne=te[0],re=te[1],ae=(0,r.useState)(""),ie=ae[0],oe=ae[1],ce=(0,r.useRef)(null),le=(0,r.useRef)(null),se=new Array(10).fill(null).map((function(){return(0,r.useRef)(null)})),ue=(0,P.Z)(),fe=ue.addInfoNotification,me=ue.addSuccessNotification,de=ue.addErrorNotification,pe=B(),he=pe.data,ve=pe.mutate,be=pe.isLoading,Ee=pe.isSuccess,ye=pe.isError,ge=[],we=function(){M(!1),A("")},Se=function(e,t){p(t),l(1)},xe=function(e,t){l(t),Ae()},Ce=function(){b(""),l(1),Ae()},Te=function(e,t,n){g({index:t,direction:n}),l(1),Ae()},ke=function(){H(!V)},Ie=function(e){W(e),J(function(e,t){var n;return null===(n=e.find((function(e){return e.uuid==t})))||void 0===n?void 0:n.name}(t,e)),ke()},Pe=function(e,t){!function(e,t){A(e),F(t),M(!0),(null==ce?void 0:ce.current)&&ce.current.scrollIntoView({behavior:"smooth",block:"start"}),(null==le?void 0:le.current)&&le.current.focus({preventScroll:!0})}(e,t)},De=function(e,t){var n=z({},x);n[e]=t,C(n)},Ae=function(){C({})},Le=function(e,t){re(t),ee(!0),ve({uuid:e});var n=fe("Manifest ".concat(t," exporting. This may take some time. Please wait."),{hasTimeout:!1});oe(n)};if(Ee&&$){var Oe=window.URL.createObjectURL(he);me("Manifest ".concat(ne," exported"),{hasTimeout:!1,alertLinkHref:Oe,alertLinkText:"Download manifest",alertLinkIsDownload:!0,keyOfAlertToReplace:ie}),oe(""),ee(!1)}ye&&$&&(de("Something went wrong. Please refresh the page and try again.",{hasTimeout:!1,keyOfAlertToReplace:ie}),oe(""),ee(!1));var Me=function(e){return void 0===e&&(e=f.PaginationVariant.top),a().createElement(f.Pagination,{isCompact:e==f.PaginationVariant.top,isDisabled:n,itemCount:T(t,v),perPage:u,page:c,onSetPage:xe,onPerPageSelect:Se,variant:e})};return a().createElement(a().Fragment,null,0===(null==t?void 0:t.length)&&i.canWriteManifests&&a().createElement(d.s3,{user:i}),((null==t?void 0:t.length)>0||!i.canWriteManifests)&&a().createElement(f.Drawer,{isExpanded:O,className:"sub-c-drawer-satellite-manifest"},a().createElement(f.DrawerContent,{panelContent:D?a().createElement(G,{uuid:D,exportManifest:Le,exportManifestButtonIsDisabled:be,onCloseClick:we,isExpanded:O,titleRef:ce,drawerRef:le,openCurrentEntitlementsListFromPanel:function(){we(),De(D,!0);var e=se[j];(null==e?void 0:e.current)&&e.current.scrollIntoView({behavior:"smooth",block:"center"})},deleteManifest:Ie}):""},a().createElement(f.DrawerContentBody,null,a().createElement(f.PageSection,{variant:f.PageSectionVariants.light},a().createElement(f.Flex,{direction:{default:"column",md:"row"},justifyContent:{default:"justifyContentSpaceBetween"}},a().createElement(f.FlexItem,null,a().createElement(f.Split,{hasGutter:!0},t.length>0&&a().createElement(f.SplitItem,{isFilled:!0},a().createElement(f.SearchInput,{placeholder:"Filter by name, version or UUID",value:v,onChange:function(e,t){b(t),l(1),Ae()},onClear:Ce})),a().createElement(f.SplitItem,null,a().createElement(N,{user:i})))),a().createElement(f.FlexItem,{align:{default:"alignRight"}},Me()))),a().createElement(m.Table,{"aria-label":"Satellite Manifest Table",variant:"compact",ouiaId:"manifestTable",ouiaSafe:!0},a().createElement(m.Thead,null,a().createElement(m.Tr,{ouiaId:"manifestTable/head",ouiaSafe:!0},a().createElement(m.Th,null),function(e){var t=[{label:"Name",sortKey:"name"},{label:"Version",sortKey:"version"},{label:a().createElement(a().Fragment,{key:"0"},"Simple Content Access",a().createElement(w,null)),sortKey:"scaStatus"},{label:"UUID",sortKey:"uuid"}];return!1===e.isSCACapable&&t.splice(2,1),t}(i).map((function(e,t){return ge.push(e.sortKey),a().createElement(m.Th,{key:t,sort:(n=t,{sortBy:{index:y.index,direction:y.direction,defaultDirection:m.SortByDirection.asc},onSort:Te,columnIndex:n})},e.label);var n})),a().createElement(m.Td,null))),(n?[]:I(t,0,v,c,u,x,0,se,ge[y.index],y.direction)).map((function(e,t){var n,r,o=e.cells,c=ge.length+2;return a().createElement(m.Tbody,{key:t,isExpanded:e.isOpen},a().createElement(m.Tr,{ouiaId:"manifestTable/row".concat(t),ouiaSafe:!0},a().createElement(m.Td,{expand:{rowIndex:t,isExpanded:e.isOpen,onToggle:function(){return e=o.uuid,void De(e,!x[e]);var e}}}),a().createElement(m.Td,null,a().createElement(f.Button,{"data-testid":"expand-details-button-".concat(t),variant:"link",onClick:function(){return Pe(o.uuid,t)}},o.name)),a().createElement(m.Td,null,o.version),i.isSCACapable&&a().createElement(m.Td,null,a().createElement(Z,{scaStatus:o.scaStatus,uuid:o.uuid,user:i})),a().createElement(m.Td,null,o.uuid),a().createElement(m.Td,null,a().createElement(m.ActionsColumn,{items:(n=o.uuid,r=o.name,[{title:"Export",onClick:function(){Le(n,r)},variant:"link"},{title:"Delete",isDisabled:!i.canWriteManifests,onClick:i.canWriteManifests?function(){Ie(n)}:null,variant:"link"}])}))),a().createElement(m.Tr,{isExpanded:e.isOpen,ouiaId:"manifestTable/details".concat(t),ouiaSafe:!0},a().createElement(m.Td,{colSpan:c},a().createElement(m.ExpandableRowContent,null,e.details.content))))}))),a().createElement(f.PageSection,{variant:f.PageSectionVariants.light},0===T(t,v)&&t.length>0&&a().createElement(d.qx,{clearFilters:Ce}),!n&&0===t.length&&a().createElement(d.s3,{user:i}),n&&a().createElement(d.qb,null),Me(f.PaginationVariant.bottom))))),a().createElement(Q,{uuid:q,name:Y,isOpen:V,handleModalToggle:ke,onSuccess:we}))};var U=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((r=r.apply(e,t||[])).next())}))},q=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},W=function(e){return function(t){return void 0===t&&(t=0),U(void 0,void 0,Promise,(function(){var n,r,a,i,o,c,l,s,u,f,m,d,p;return q(this,(function(h){switch(h.label){case 0:return r=fetch,a=["/api/rhsm/v2/manifests?type=Satellite&offset=".concat(t)],d={},p={},i="Bearer ".concat,[4,e];case 1:return[4,r.apply(void 0,a.concat([(d.headers=(p.Authorization=i.apply("Bearer ",[h.sent()]),p),d)]))];case 2:if(200!=(n=h.sent()).status)throw new Error("Error fetching manifest data: ".concat(n.statusText));return[4,n.json()];case 3:return o=h.sent(),c=o.pagination,l=c.count,s=c.limit,u=o.body,l!==s?[3,5]:(f=t+s,[4,W(e)(f)]);case 4:m=h.sent(),u.push.apply(u,m),h.label=5;case 5:return[2,u]}}))}))}},K=n(8463),Y=n(2112),J="https://access.redhat.com/support",X=window.location.pathname.replace("manifests","inventory"),$=function(){return a().createElement(f.EmptyState,{variant:f.EmptyStateVariant.lg},a().createElement(f.EmptyStateHeader,{titleText:"Your account has no Satellite subscriptions",icon:a().createElement(f.EmptyStateIcon,{icon:Y.ZP}),headingLevel:"h2"}),a().createElement(f.EmptyStateBody,null,a().createElement(f.TextContent,{className:"pf-u-mb-xl"},a().createElement(f.Text,{variant:"small"},"A Satellite subscription is required to create a manifest. Contact support to determine if you need a new subscription. To view recently expired subscriptions, select the"," ",a().createElement("em",null,"Expired")," card in your subscription inventory.")),a().createElement(f.Button,{variant:"primary",component:"a",href:J,target:"_blank"},"Contact support"),a().createElement("br",null),a().createElement(f.Button,{variant:"link",component:"a",href:X},"View subscription inventory")))};const ee=function(){var e,t=(e=(0,h.dQ)(),(0,p.useQuery)("manifests",(function(){return function(e){return function(){return U(void 0,void 0,Promise,(function(){return q(this,(function(t){switch(t.label){case 0:return[4,W(e)()];case 1:return[2,(n=t.sent(),n.filter((function(e){return parseInt(e.version)>=6})))]}var n}))}))}}(e)()}))),n=t.isLoading,r=t.isFetching,i=t.error,o=t.data,c=(0,K.Z)().data;return a().createElement(a().Fragment,null,a().createElement(u,null,a().createElement(f.TextContent,null,a().createElement(f.Text,{component:"h1"},"Manifests"),a().createElement(f.Text,{component:"p"},"Export subscriptions to your on-premise subscription management application."," ",a().createElement(g,{href:"https://access.redhat.com/documentation/en-us/subscription_central/2023/html/creating_and_managing_manifests_for_a_connected_satellite_server/index"},"Learn more about creating and managing manifests for a connected Satellite Server"),!c.isEntitled&&!n&&0!=(null==o?void 0:o.length)&&a().createElement(f.Alert,{title:"Your account has no Satellite subscriptions",isInline:!0,variant:"info"},"You can view existing manifests for your account, however, an active Satellite subscription is required to create a new manifest."," ",a().createElement("a",{href:J,target:"_blank",rel:"noreferrer"},"Contact support")," ","to determine if you need a new subscription. To view recently expired subscriptions, select the ",a().createElement("em",null,"Expired")," card in your"," ",a().createElement("a",{href:X},"subscription inventory"),".")))),a().createElement(f.PageSection,null,a().createElement(a().Fragment,null,n&&!i&&a().createElement(d.qb,null),!n&&!i&&!c.isEntitled&&0==o.length&&a().createElement($,null),!n&&!i&&(c.isEntitled||0!=o.length)&&a().createElement(H,{data:o,user:c,isFetching:r}),i&&a().createElement(_.Z,null))))}},4184:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var o=a.apply(null,n);o&&e.push(o)}}else if("object"===i){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var c in n)r.call(n,c)&&n[c]&&e.push(c)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()}}]);
//# sourceMappingURL=../sourcemaps/80.6997a01394dd632e52317eb0e96c1c33.js.map