(self.webpackChunksubscription_central=self.webpackChunksubscription_central||[]).push([[621],{1056:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var a=n(94015),r=n.n(a),i=n(23645),s=n.n(i)()(r());s.push([e.id,".manifests .manifest-detail-drawer-loading{margin-right:-50px;min-height:calc(100vh - 247px);display:flex;flex-direction:column;justify-content:center}.manifests .manifest-details-content{font-size:14px}.manifests .manifest-details-content .pf-l-grid__item{padding:4px 0}.manifests .manifest-details-content h3{font-size:24px;font-weight:bold}.manifests .manifest-details-content h4{font-size:18px;margin:10px 0;font-weight:600}.manifests .manifest-details-content .manifest-details-open-entitlements-button{padding:0;margin:4px 0}.manifests .manifest-details-content .manifest-details-delete-text{margin-top:30px}.manifests .manifest-details-content button.pf-m-tertiary{margin-top:30px}\n","",{version:3,sources:["webpack://./src/components/ManifestDetailSidePanel/ManifestDetailSidePanel.scss"],names:[],mappings:"AAAA,2CACgC,kBAAkB,CAAC,8BAA8B,CAAC,YAAY,CAAC,qBAAqB,CAAC,sBAAsB,CAD3I,qCACsK,cAAc,CADpL,sDACgO,aAAa,CAD7O,wCAC2Q,cAAc,CAAC,gBAAgB,CAD1S,wCACwU,cAAc,CAAC,aAAa,CAAC,eAAe,CADpX,gFAC0b,SAAS,CAAC,YAAY,CADhd,mEACygB,eAAe,CADxhB,0DACwkB,eAAe",sourcesContent:[".manifests{\n.manifest-detail-drawer-loading{margin-right:-50px;min-height:calc(100vh - 247px);display:flex;flex-direction:column;justify-content:center}.manifest-details-content{font-size:14px}.manifest-details-content .pf-l-grid__item{padding:4px 0}.manifest-details-content h3{font-size:24px;font-weight:bold}.manifest-details-content h4{font-size:18px;margin:10px 0;font-weight:600}.manifest-details-content .manifest-details-open-entitlements-button{padding:0;margin:4px 0}.manifest-details-content .manifest-details-delete-text{margin-top:30px}.manifest-details-content button.pf-m-tertiary{margin-top:30px}\n\n}"],sourceRoot:""}]);const o=s},9237:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var a=n(94015),r=n.n(a),i=n(23645),s=n.n(i)()(r());s.push([e.id,".manifests .manifests_entitlement-list-table{margin-top:10px;margin-bottom:20px}.manifests .manifests_entitlement-list-table thead tr{border:none}.manifests .manifests_entitlement-list-table thead th{padding-left:30px}.manifests .entitlement-list-loading-container,.manifests .no-entitlements-reason{padding:30px}.manifests .pf-c-table__expandable-row tr>td{padding:0 30px}\n","",{version:3,sources:["webpack://./src/components/ManifestEntitlementsList/ManifestEntitlementsList.scss"],names:[],mappings:"AAAA,6CACkC,eAAe,CAAC,kBAAkB,CADpE,sDACgH,WAAW,CAD3H,sDACuK,iBAAiB,CADxL,kFACqP,YAAY,CADjQ,6CACoS,cAAc",sourcesContent:[".manifests{\n.manifests_entitlement-list-table{margin-top:10px;margin-bottom:20px}.manifests_entitlement-list-table thead tr{border:none}.manifests_entitlement-list-table thead th{padding-left:30px}.entitlement-list-loading-container,.no-entitlements-reason{padding:30px}.pf-c-table__expandable-row tr>td{padding:0 30px}\n\n}"],sourceRoot:""}]);const o=s},11705:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var a=n(94015),r=n.n(a),i=n(23645),s=n.n(i)()(r());s.push([e.id,".manifests .sca-more-info-icon{color:#4c9aec;margin-left:5px;margin-top:1px;margin-bottom:-1px}.manifests .sca-more-info-icon:hover{cursor:pointer}\n","",{version:3,sources:["webpack://./src/components/SCAInfoIconWithPopover/SCAInfoIconWithPopover.scss"],names:[],mappings:"AAAA,+BACoB,aAAa,CAAC,eAAe,CAAC,cAAc,CAAC,kBAAkB,CADnF,qCAC8G,cAAc",sourcesContent:[".manifests{\n.sca-more-info-icon{color:#4c9aec;margin-left:5px;margin-top:1px;margin-bottom:-1px}.sca-more-info-icon:hover{cursor:pointer}\n\n}"],sourceRoot:""}]);const o=s},7805:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var a=n(94015),r=n.n(a),i=n(23645),s=n.n(i)()(r());s.push([e.id,".manifests .sca-status-error-icon{margin-top:2px;margin-bottom:-2px}.manifests .sca-status-error-msg{font-size:12px;line-height:1.4em;width:calc(100% - 23px);float:right}.manifests .sca-status-spinner{margin:6px 0 -6px 5px}\n","",{version:3,sources:["webpack://./src/components/SCAStatusSwitch/SCAStatusSwitch.scss"],names:[],mappings:"AAAA,kCACuB,cAAc,CAAC,kBAAkB,CADxD,iCAC+E,cAAc,CAAC,iBAAiB,CAAC,uBAAuB,CAAC,WAAW,CADnJ,+BACwK,qBAAqB",sourcesContent:[".manifests{\n.sca-status-error-icon{margin-top:2px;margin-bottom:-2px}.sca-status-error-msg{font-size:12px;line-height:1.4em;width:calc(100% - 23px);float:right}.sca-status-spinner{margin:6px 0 -6px 5px}\n\n}"],sourceRoot:""}]);const o=s},46083:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var a=n(94015),r=n.n(a),i=n(23645),s=n.n(i)()(r());s.push([e.id,".manifests h2.pf-c-title{margin-bottom:20px}.manifests .pf-c-badge{margin-left:5px}.manifests .pf-c-table{margin-top:30px}@media (min-width: 768px){.manifests .pf-c-search-input{min-width:270px}}\n","",{version:3,sources:["webpack://./src/components/SatelliteManifestPanel/SatelliteManifestPanel.scss"],names:[],mappings:"AAAA,yBACc,kBAAkB,CADhC,uBAC6C,eAAe,CAD5D,uBACyE,eAAe,CAAC,0BADzF,8BACsI,eAAe,CAAE",sourcesContent:[".manifests{\nh2.pf-c-title{margin-bottom:20px}.pf-c-badge{margin-left:5px}.pf-c-table{margin-top:30px}@media (min-width: 768px){.pf-c-search-input{min-width:270px}}\n\n}"],sourceRoot:""}]);const o=s},1621:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Y});var a=n(77865),r=n.n(a),i=n(334),s=n(86350),o=n(48716),l=n(39173),c=n(17345),u=n(78443),m=n(59346);n(65283);const f=function(e){var t=e.entitlementsData,n=e.isLoading,i=e.isSuccess,s=e.isError,o=e.entitlementsRowRef;(0,a.useEffect)((function(){(null==o?void 0:o.current)&&(o.current.scrollIntoView({behavior:"smooth",block:"center"}),o.current.focus({preventScroll:!0}))}),[i]);var l=[{title:"Subscription name",transforms:[u.nowrap]},{title:"SKU",transforms:[u.nowrap]},{title:"Contract number",transforms:[u.nowrap]},{title:"Quantity",transforms:[u.nowrap]},{title:"Start date",transforms:[u.nowrap]},{title:"End date",transforms:[u.nowrap]}],c=function(e){return e?e.substr(0,4)+"-"+e.substr(5,2)+"-"+e.substr(8,2):""},f=[];(null==t?void 0:t.value)&&(f=null==t?void 0:t.value.map((function(e){var t=c(e.startDate),n=c(e.endDate);return[e.subscriptionName,e.sku,e.contractNumber,e.entitlementQuantity,t,n]})));var d=[{title:"Remove Subscription",onClick:function(e,t,n){console.log("clicked on Some action, on row: ",t,n)}},{title:"Move Subscription",onClick:function(e,t,n){console.log("clicked on Some action, on row: ",t,n)}}];return r().createElement(r().Fragment,null,n&&!s&&r().createElement("div",{className:"entitlement-list-loading-container"},r().createElement(m.qb,null)),i&&!t.valid&&r().createElement("div",{className:"no-entitlements-reason"},r().createElement("p",{tabIndex:i?0:-1,ref:o},t.reason)),i&&t.valid&&r().createElement("div",{ref:o},r().createElement(u.Table,{"aria-label":"Allocations table",cells:l,rows:f,borders:!1,actions:d,className:"manifests_entitlement-list-table"},r().createElement(u.TableHeader,null),r().createElement(u.TableBody,null))),s&&"Something went wrong.  Please refresh the page and try again.")};var d=n(88767),p=n(36808),h=n.n(p),g=n(85186),A=function(e){return(0,d.useQuery)(["manifestEntitlements",e],(function(){return function(e){var t=h().get("cs_jwt"),n=(0,g.iE)().rhsmAPIBase;return fetch(n+"/management/v1/allocations/"+e+"?include=entitlements",{headers:{Authorization:"Bearer "+t},mode:"cors"}).then((function(e){return e.json()}))}(e)}))};const v=function(e){var t,n=e.uuid,a=e.entitlementsRowRef,i=A(n),s=i.isLoading,o=i.isSuccess,l=i.isError,c=i.data;return r().createElement(f,{isLoading:s,isSuccess:o,isError:l,entitlementsData:null===(t=null==c?void 0:c.body)||void 0===t?void 0:t.entitlementsAttached,entitlementsRowRef:a})};var E=n(84564),b=function(){return(b=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};n(12236);const C=function(e){var t,n=e.scaStatus,a=e.uuid,i="enabled"===n.toLowerCase(),s=(t=(0,d.useQueryClient)(),(0,d.useMutation)((function(e){return n=(t=e).uuid,a=t.newSCAStatus,r=h().get("cs_jwt"),i=(0,g.iE)().rhsmAPIBase,s={simpleContentAccess:a},fetch(i+"/management/v1/allocations/"+n,{method:"PUT",headers:{Authorization:"Bearer "+r},body:JSON.stringify(s)}).then((function(e){if(204!==e.status)throw new Error("Status Code "+e.status+".  Error updating SCA status: "+e.statusText+".  ");return{success:!0,status:e.status}})).catch((function(e){console.error(e)}));var t,n,a,r,i,s}),{onSuccess:function(e,n){if(e){var a=n.uuid,r=n.newSCAStatus;!function(e,t,n){var a=e.getQueryData("manifests").map((function(e){if(e.uuid===t){var a=b({},e);return a.simpleContentAccess=n,a}return e}));e.setQueryData("manifests",a)}(t,a,r),function(e,t,n){var a=e.getQueryData(["manifestEntitlements",t]);if(a){var r={body:b(b({},a.body),{simpleContentAccess:n})};e.setQueryData(["manifestEntitlements",t],r)}}(t,a,r)}}})),o=s.data,l=s.mutate,u=s.isLoading,m=s.isError,f=s.isSuccess,p=function(){!function(e,t){var n="enabled"===t.toLowerCase()?"disabled":"enabled";l({uuid:e,newSCAStatus:n})}(a,n)};return!0===(!0===m||f&&!o)?r().createElement((function(){return r().createElement(r().Fragment,null,r().createElement(E.ZP,{color:"var(--pf-global--danger-color--100)",className:"sca-status-error-icon"}),r().createElement("span",{className:"sca-status-error-msg"},"Something went wrong. Please refresh the page and try again."))}),null):!0===u?r().createElement((function(){return r().createElement(c.Spinner,{size:"lg",className:"sca-status-spinner"})}),null):"disallowed"===n?r().createElement((function(){return r().createElement("p",null,"N/A")}),null):r().createElement((function(){return r().createElement(c.Switch,{id:"sca-status-switch-"+a,"data-testid":"sca-status-switch","aria-label":"SCA Status for this Manifest is "+n,isChecked:i,onChange:p,label:"Enabled",labelOff:"Disabled"})}),null)};var w=n(31369),x=n(50470);const y=function(e){var t=e.href,n=e.children;return r().createElement(c.Button,{variant:"link",component:"a",href:t,target:"_blank",isInline:!0,icon:r().createElement(x.ZP,null),iconPosition:"right"},n)};n(29041);const S=function(){return r().createElement(r().Fragment,null,r().createElement(c.Popover,{"aria-label":"Learn more about Simple Content Access",headerContent:"Simple Content Access",bodyContent:r().createElement("p",null,"Simple content access is a set of capabilities that enables a change in the way Red Hat manages its subscription and entitlement enforcement model. When enabled, you are allowed to consume content on your systems without strict entitlement enforcement."),footerContent:r().createElement(y,{href:"https://access.redhat.com/documentation/en-us/subscription_central/2020-10/html/getting_started_with_subscription_watch_with_simple_content_access/assembly-activating-simplecontent#con-what-is-simplecontent_assembly-simplecontent-ctxt"},"Learn more about enabling simple content access on an existing Satellite allocation and manifest")},r().createElement(w.ZP,{className:"sca-more-info-icon","data-testid":"sca-more-info-icon",onClick:function(e){e.stopPropagation()}})))};var k=function(e,t){for(var n=0,a=t.length,r=e.length;n<a;n++,r++)e[r]=t[n];return e},D=function(e){var t=[{title:"Name",transforms:[u.sortable],cellFormatters:[u.expandable]},{title:"Version",transforms:[u.sortable]},{title:r().createElement(r().Fragment,null,"Simple Content Access",r().createElement(S,null)),transforms:[u.sortable,(0,u.cellWidth)(20)]},{title:"UUID",transforms:[u.sortable]}];return!1===e.isSCACapable&&t.splice(2,1),t},B=function(e,t){return e.filter((function(e){return(e.name||"").toLowerCase().includes(t.toLowerCase().trim())||(e.version||"").toLowerCase().includes(t.toLowerCase().trim())||(e.uuid||"").toLowerCase().includes(t.toLowerCase().trim())}))},I=function(e,t){return B(e,t).length},L=function(e,t,n,a,i,s,o,l,m){var f=function(e,t,n,a,r){var i=(n-1)*a,s=i+a;return function(e,t,n){return function(e,t){var n=t.direction,a=t.index-1,r=n===u.SortByDirection.desc?-1:1;return e.sort((function(e,t){var n=e[a].toLowerCase(),i=t[a].toLowerCase();return n<i?-1*r:n>i?1*r:0}))}(function(e,t){return B(e,t).map((function(e){var t=e.simpleContentAccess||"disabled";return parseFloat(e.version)<=6.2&&(t="disallowed"),[e.name,e.version,t,e.uuid]}))}(e,t),n)}(e,t,r).slice(i,s)}(e,n,a,i,m),d=[];return f.forEach((function(e,n){var a=e[3],i=s[a]||!1,u=2*(n+1)-2,m=i?r().createElement(v,{uuid:a,entitlementsRowRef:l[n]}):"",f=function(e,t,n,a){var i=e[0],s=e[1],o=e[2],l=e[3],u=[r().createElement(r().Fragment,{key:"button-"+l},r().createElement(c.Button,{"data-testid":"expand-details-button-"+t,variant:"link",onClick:function(){return n(l,t)}},i)),s,r().createElement(r().Fragment,{key:"scastatusswitch-"+l},r().createElement(C,{scaStatus:o,uuid:l})),l];return!1===a.isSCACapable&&u.splice(2,1),u}(e,n,o,t);d.push({isOpen:i,cells:k([],f)}),d.push({parent:u,fullWidth:!0,noPadding:!0,cells:[{title:m}]})})),d},P=n(95841),_=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))},T=function(e,t){var n,a,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},R=function(e){var t=h().get("cs_jwt"),n=(0,g.iE)().rhsmAPIBase;return fetch(n+"/management/v1/allocations/"+e+"/export",{headers:{Authorization:"Bearer "+t},mode:"cors"}).then((function(e){return e.json()}))},M=function(e,t){return _(void 0,void 0,void 0,(function(){var n,a,r;return T(this,(function(i){switch(i.label){case 0:return n=h().get("cs_jwt"),a=(0,g.iE)().rhsmAPIBase,[4,fetch(a+"/management/v1/allocations/"+e+"/exportJob/"+t,{headers:{Authorization:"Bearer "+n},mode:"cors"})];case 1:return 200!==(r=i.sent()).status?[3,2]:[2,r.json()];case 2:return 202!==r.status&&404!==r.status?[3,4]:[4,(5e3,new Promise((function(e){return setTimeout(e,5e3)})))];case 3:return i.sent(),[2,M(e,t)];case 4:throw new Error("Error fetching status of exported manifest")}}))}))},F=function(e,t){var n=h().get("cs_jwt"),a=(0,g.iE)().rhsmAPIBase;return fetch(a+"/management/v1/allocations/"+e+"/export/"+t,{headers:{Authorization:"Bearer "+n,"Content-type":"application/zip"},mode:"cors"}).then((function(e){return e.blob()}))},N=function(){return(0,d.useMutation)((function(e){return t=e.uuid,_(void 0,void 0,void 0,(function(){var e,n;return T(this,(function(a){switch(a.label){case 0:return[4,R(t)];case 1:return e=a.sent(),[4,M(t,e.body.exportJobID)];case 2:return n=a.sent(),[4,F(t,n.body.exportID)];case 3:return[2,a.sent()]}}))}));var t}))};const G=n(41084).Z;n(63787);const O=function(e){var t=e.isExpanded,n=e.titleRef,i=e.drawerRef,s=e.uuid,o=e.onCloseClick,l=e.exportManifest,u=e.exportManifestButtonIsDisabled,f=e.openCurrentEntitlementsListFromPanel,p=e.deleteManifest,h=A(s),g=h.data,v=h.isLoading,E=h.isFetching,b=h.isSuccess,C=h.isError,w=(0,d.useQueryClient)().getQueryData("user");(0,a.useEffect)((function(){!0===t&&(x(),y())}),[t,b,v]);var x=function(){(null==n?void 0:n.current)&&n.current.scrollIntoView({behavior:"smooth",block:"start"})},y=function(){(null==i?void 0:i.current)&&i.current.focus({preventScroll:!0})},k=function(){var e=g.body,t=e.uuid,n=e.name;l(t,n),o()},D=function(){return r().createElement("div",{className:"manifest-detail-drawer-loading","aria-label":"Loading Manifest Details",tabIndex:v?0:-1,ref:i},r().createElement(m.qb,null))},B=function(){if(!(null==g?void 0:g.body))return r().createElement(m.Bc,null);var e=g.body,t=e.uuid,n=e.name,a=e.version,s=e.createdDate,o=e.createdBy,l=e.lastModified,d=e.entitlementsAttachedQuantity,h=e.simpleContentAccess,A=function(e){return new Date(e).toLocaleString("en-US",{month:"long",year:"numeric",day:"numeric",timeZone:"America/New_York"})};return r().createElement("div",{className:"manifest-details-content"},r().createElement("h3",{tabIndex:b?0:-1,ref:i},n),r().createElement("h4",null,"Details"),r().createElement(c.Grid,null,r().createElement(c.GridItem,{span:6},r().createElement("strong",null,"Name")),r().createElement(c.GridItem,{span:6},n),r().createElement(c.GridItem,{span:6},r().createElement("strong",null,"Type")),r().createElement(c.GridItem,{span:6},"Satellite ",a),r().createElement(c.GridItem,{span:6},r().createElement("strong",null,"UUID")),r().createElement(c.GridItem,{span:6},t)),r().createElement("h4",null,"Subscriptions"),r().createElement(c.Grid,null,r().createElement(c.GridItem,{span:6},r().createElement("strong",null,"Simple content access",r().createElement(S,null))),r().createElement(c.GridItem,{span:6},!0===w.isSCACapable?h:"administratively disabled"),r().createElement(c.GridItem,{span:6},r().createElement("strong",null,"Quantity")),r().createElement(c.GridItem,{span:6},r().createElement(c.Button,{variant:"link",onClick:f,className:"manifest-details-open-entitlements-button"},d))),r().createElement("h4",null,"History"),r().createElement(c.Grid,null,r().createElement(c.GridItem,{span:6},r().createElement("strong",null,"Created")),r().createElement(c.GridItem,{span:6},A(s)),r().createElement(c.GridItem,{span:6},r().createElement("strong",null,"Created by")),r().createElement(c.GridItem,{span:6},o),r().createElement(c.GridItem,{span:6},r().createElement("strong",null,"Last modified date")),r().createElement(c.GridItem,{span:6},A(l))),r().createElement(c.Button,{variant:"tertiary",onClick:k,isDisabled:u},"Export manifest"),r().createElement("p",{className:"manifest-details-delete-text"},"Deleting a subscription allocation is ",r().createElement("strong",null,"STRONGLY")," discouraged. This action should only be taken in extreme circumstances or for debugging purposes"),r().createElement(c.Button,{variant:"tertiary",onClick:function(){p(t)}},"Delete manifest"))};return r().createElement(c.DrawerPanelContent,null,r().createElement(c.DrawerHead,null,r().createElement((function(){return!0===C?r().createElement(m.Bc,null):!0===v||!0===E?r().createElement(D,null):!0===b?r().createElement(B,null):void 0}),null),r().createElement(c.DrawerActions,null,r().createElement(c.DrawerCloseButton,{onClick:function(){o()}}))))};n(44029);const j=function(e){var t,n=e.handleModalToggle,a=e.onSuccess,i=e.isOpen,s=e.name,o=e.uuid,l=r().useState(!1),u=l[0],m=l[1],f=(0,P.Z)(),p=f.addSuccessNotification,A=f.addErrorNotification,v=(t=(0,d.useQueryClient)(),(0,d.useMutation)((function(e){return function(e){var t=h().get("cs_jwt"),n=(0,g.iE)().rhsmAPIBase;return fetch(n+"/management/v1/allocations/"+e+"?force=true",{method:"DELETE",headers:{Authorization:"Bearer "+t},mode:"cors"}).then((function(e){if(204!=e.status)throw new Error("Status Code "+e.status+".  Error deleting manifest: "+e.statusText+".")}))}(e)}),{onSuccess:function(e,n){t.setQueryData("manifests",(function(e){return e.filter((function(e){return e.uuid!=n}))}))}})),E=v.isError,b=v.isLoading,C=v.isSuccess,w=v.mutate,x=v.reset,y=C||E,S=function(){n(),m(!1)};return C?(a(),p("Manifest "+s+" deleted")):E&&A("Something went wrong. Please try again"),y&&(S(),x()),r().createElement(c.Modal,{isOpen:i,onClose:S,title:b?"Deleting "+s+"...":"Delete "+s,variant:c.ModalVariant.small,titleIconVariant:"warning",actions:b?[]:[r().createElement(c.Button,{key:"cancel",variant:"link",onClick:S},"NO, CANCEL"),r().createElement(c.Button,{key:"confirm",variant:"danger",isDisabled:!u,onClick:function(){return w(o)}},"YES, DELETE")]},b?r().createElement(c.EmptyState,null,r().createElement(c.EmptyStateIcon,{variant:"container",component:c.Spinner})):r().createElement(c.TextContent,null,r().createElement(c.Text,{component:c.TextVariants.p},"Deleting a manifest is STRONGLY discouraged. Deleting a manifest will:"),r().createElement(c.List,null,r().createElement(c.ListItem,null,"Delete all subscriptions that are attached to running hosts."),r().createElement(c.ListItem,null,"Delete all subscriptions attached to activation keys."),r().createElement(c.ListItem,null,"Disable Red Hat Insights."),r().createElement(c.ListItem,null,"Require you to upload the manifest and re-attach subscriptions to hosts and activation keys.")),r().createElement(c.Text,{component:c.TextVariants.p},r().createElement("strong",null,"Caution: this operation is permanent and cannot be undone.")),r().createElement(c.Checkbox,{label:"Are you sure you want to delete this manifest?",isChecked:u,id:"confirmation_checkbox",onChange:function(e,t){m(t.target.checked)}})))};var Q=function(){return(Q=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};const z=function(e){var t=e.data,n=e.isFetching,i=e.user,s=(0,a.useState)(1),o=s[0],l=s[1],f=(0,a.useState)(10),d=f[0],p=f[1],h=(0,a.useState)(""),g=h[0],A=h[1],v=(0,a.useState)({index:1,direction:u.SortByDirection.asc}),E=v[0],b=v[1],C=(0,a.useState)({}),w=C[0],x=C[1],y=(0,a.useState)(""),S=y[0],k=y[1],B=(0,a.useState)(!1),_=B[0],T=B[1],R=(0,a.useState)(null),M=R[0],F=R[1],z=(0,a.useState)(!1),q=z[0],U=z[1],V=(0,a.useState)(""),Z=V[0],Y=V[1],H=(0,a.useState)(""),W=H[0],J=H[1],K=(0,a.useState)(!1),X=K[0],$=K[1],ee=(0,a.useState)(""),te=ee[0],ne=ee[1],ae=(0,a.useState)(""),re=ae[0],ie=ae[1],se=(0,a.useRef)(null),oe=(0,a.useRef)(null),le=new Array(10).fill(null).map((function(){return(0,a.useRef)(null)})),ce=(0,P.Z)(),ue=ce.addInfoNotification,me=ce.addSuccessNotification,fe=ce.addErrorNotification,de=N(),pe=de.data,he=de.mutate,ge=de.isLoading,Ae=de.isSuccess,ve=de.isError,Ee=function(){T(!1),k("")},be=function(e,t){p(t),l(1)},Ce=function(e,t){l(t),ke()},we=function(){A(""),l(1),ke()},xe=function(){U(!q)},ye=function(e){Y(e),J(function(e,t){var n;return null===(n=e.find((function(e){return e.uuid==t})))||void 0===n?void 0:n.name}(t,e)),xe()},Se=function(e,t){var n=Q({},w);n[e]=t,x(n)},ke=function(){x({})},De=function(e,t){ne(t),$(!0),he({uuid:e});var n=ue("Manifest "+t+" exporting. This may take some time. Please wait.",{hasTimeout:!1});ie(n)};Ae&&X&&(me("Manifest "+te+" Exported",{hasTimeout:!1,alertLinkHref:window.URL.createObjectURL(pe),alertLinkText:"Download Manifest",alertLinkIsDownload:!0,keyOfAlertToReplace:re}),ie(""),$(!1)),ve&&X&&(fe("Something went wrong. Please refresh the page and try again.",{hasTimeout:!1,keyOfAlertToReplace:re}),ie(""),$(!1));var Be=function(e){return void 0===e&&(e=c.PaginationVariant.top),r().createElement(c.Pagination,{isDisabled:n,itemCount:I(t,g),perPage:d,page:o,onSetPage:Ce,onPerPageSelect:be,variant:e})},Ie=r().createElement(O,{uuid:S,exportManifest:De,exportManifestButtonIsDisabled:ge,onCloseClick:Ee,isExpanded:_,titleRef:se,drawerRef:oe,openCurrentEntitlementsListFromPanel:function(){Ee(),Se(S,!0);var e=le[M];(null==e?void 0:e.current)&&e.current.scrollIntoView({behavior:"smooth",block:"center"})},deleteManifest:ye});return r().createElement(r().Fragment,null,0===(null==t?void 0:t.length)&&i.isOrgAdmin&&r().createElement(m.s3,null),((null==t?void 0:t.length)>0||!i.isOrgAdmin)&&r().createElement(c.PageSection,{variant:"light"},r().createElement(c.Drawer,{isExpanded:_},r().createElement(c.DrawerContent,{panelContent:Ie},r().createElement(c.DrawerContentBody,null,r().createElement(c.Title,{headingLevel:"h2"},r().createElement("span",{ref:se},"Manifests"),!n&&r().createElement(c.Badge,{isRead:!0},I(t,g))),r().createElement(c.Flex,{direction:{default:"column",md:"row"},justifyContent:{default:"justifyContentSpaceBetween"}},r().createElement(c.FlexItem,null,r().createElement(c.Split,{hasGutter:!0},t.length>0&&r().createElement(c.SplitItem,{isFilled:!0},r().createElement(c.SearchInput,{placeholder:"Filter by name, version or UUID",value:g,onChange:function(e){A(e),l(1),ke()},onClear:we})),!0===i.isOrgAdmin&&r().createElement(c.SplitItem,null,r().createElement(G,null)))),r().createElement(c.FlexItem,{align:{default:"alignRight"}},Be())),r().createElement(u.Table,{"aria-label":"Satellite Manifest Table",cells:D(i),rows:n?[]:L(t,i,g,o,d,w,(function(e,t){!function(e,t){k(e),F(t),T(!0),(null==se?void 0:se.current)&&se.current.scrollIntoView({behavior:"smooth",block:"start"}),(null==oe?void 0:oe.current)&&oe.current.focus({preventScroll:!0})}(e,t)}),le,E),onCollapse:function(e,t,n,a){var r=a.uuid.title;Se(r,!w[r])},sortBy:E,onSort:function(e,t,n){b({index:t,direction:n}),l(1),ke()},actions:[{title:"Export",onClick:function(e,t,n){var a=n.cells[0].props.children.props.children,r=n.uuid.title;De(r,a)}},{title:"Delete",onClick:function(e,t,n){ye(n.uuid.title)}}],areActionsDisabled:function(){return ge}},r().createElement(u.TableHeader,null),r().createElement(u.TableBody,null)),0===I(t,g)&&t.length>0&&r().createElement(m.qx,{clearFilters:we}),!n&&0===t.length&&r().createElement(m.Ox,null),n&&r().createElement(m.qb,null),Be(c.PaginationVariant.bottom))))),r().createElement(j,{uuid:Z,name:W,isOpen:q,handleModalToggle:xe,onSuccess:Ee}))};var q=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))},U=function(e,t){var n,a,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},V=function(e){return void 0===e&&(e=0),q(void 0,void 0,void 0,(function(){var t,n,a,r,i,s,o,l;return U(this,(function(c){switch(c.label){case 0:return t=h().get("cs_jwt"),n=(0,g.iE)().rhsmAPIBase,[4,fetch(n+"/management/v1/allocations?type=Satellite&offset="+e,{headers:{Authorization:"Bearer "+t},mode:"cors"})];case 1:return[4,c.sent().json()];case 2:return a=c.sent(),r=a.pagination,i=r.count,s=r.limit,o=a.body,i!==s?[3,4]:[4,V(e+s)];case 3:l=c.sent(),o.push.apply(o,l),c.label=4;case 4:return[2,o]}}))}))},Z=n(20167);const Y=(0,i.withRouter)((function(){var e=(0,d.useQuery)("manifests",(function(){return q(void 0,void 0,void 0,(function(){return U(this,(function(e){switch(e.label){case 0:return[4,V()];case 1:return[2,(t=e.sent(),t.filter((function(e){return parseInt(e.version)>=6})))]}var t}))}))})),t=e.isLoading,n=e.isFetching,a=e.error,i=e.data,c=(0,d.useQueryClient)().getQueryData("user");return r().createElement(r().Fragment,null,r().createElement(o.Z,null,r().createElement(l.Z,{title:"Manifests"}),r().createElement("p",null,"Export subscriptions to your on-premise subscription management application")),r().createElement(s.Z,null,r().createElement(r().Fragment,null,t&&!a&&r().createElement(m.qb,null),!t&&!a&&r().createElement(z,{data:i,user:c,isFetching:n}),a&&r().createElement(Z.Z,null))))}))},63787:(e,t,n)=>{"use strict";var a=n(93379),r=n.n(a),i=n(1056),s=r()(i.default,{insert:"head",singleton:!1});if(!i.default.locals||e.hot.invalidate){var o=i.default.locals;e.hot.accept(1056,(t=>{i=n(1056),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(o,i.default.locals)?(o=i.default.locals,s(i.default)):e.hot.invalidate()}))}e.hot.dispose((function(){s()})),i.default.locals},65283:(e,t,n)=>{"use strict";var a=n(93379),r=n.n(a),i=n(9237),s=r()(i.default,{insert:"head",singleton:!1});if(!i.default.locals||e.hot.invalidate){var o=i.default.locals;e.hot.accept(9237,(t=>{i=n(9237),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(o,i.default.locals)?(o=i.default.locals,s(i.default)):e.hot.invalidate()}))}e.hot.dispose((function(){s()})),i.default.locals},29041:(e,t,n)=>{"use strict";var a=n(93379),r=n.n(a),i=n(11705),s=r()(i.default,{insert:"head",singleton:!1});if(!i.default.locals||e.hot.invalidate){var o=i.default.locals;e.hot.accept(11705,(t=>{i=n(11705),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(o,i.default.locals)?(o=i.default.locals,s(i.default)):e.hot.invalidate()}))}e.hot.dispose((function(){s()})),i.default.locals},12236:(e,t,n)=>{"use strict";var a=n(93379),r=n.n(a),i=n(7805),s=r()(i.default,{insert:"head",singleton:!1});if(!i.default.locals||e.hot.invalidate){var o=i.default.locals;e.hot.accept(7805,(t=>{i=n(7805),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(o,i.default.locals)?(o=i.default.locals,s(i.default)):e.hot.invalidate()}))}e.hot.dispose((function(){s()})),i.default.locals},44029:(e,t,n)=>{"use strict";var a=n(93379),r=n.n(a),i=n(46083),s=r()(i.default,{insert:"head",singleton:!1});if(!i.default.locals||e.hot.invalidate){var o=i.default.locals;e.hot.accept(46083,(t=>{i=n(46083),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(o,i.default.locals)?(o=i.default.locals,s(i.default)):e.hot.invalidate()}))}e.hot.dispose((function(){s()})),i.default.locals}}]);
//# sourceMappingURL=621.3b9442c7a086ff4e27a1.js.map