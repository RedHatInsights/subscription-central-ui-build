"use strict";(self.webpackChunksubscription_central=self.webpackChunksubscription_central||[]).push([[639],{71806:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});var a=n(92950),r=n.n(a),i=n(63684),o=n(48716),l=n(39173),c=n(23212),s=n(22160),u=n(66189);const m=function(e){var t=e.entitlementsData,n=e.isLoading,i=e.isSuccess,o=e.isError,l=e.entitlementsRowRef;(0,a.useEffect)((function(){(null==l?void 0:l.current)&&(l.current.scrollIntoView({behavior:"smooth",block:"center"}),l.current.focus({preventScroll:!0}))}),[i]);var c=[{title:"Subscription name",transforms:[s.nowrap]},{title:"SKU",transforms:[s.nowrap]},{title:"Contract number",transforms:[s.nowrap]},{title:"Quantity",transforms:[s.nowrap]},{title:"Start date",transforms:[s.nowrap]},{title:"End date",transforms:[s.nowrap]}],m=function(e){if(!e)return"";var t=e.substr(0,4),n=e.substr(5,2),a=e.substr(8,2);return"".concat(t,"-").concat(n,"-").concat(a)},f=[];return(null==t?void 0:t.value)&&(f=null==t?void 0:t.value.map((function(e){var t=m(e.startDate),n=m(e.endDate);return[e.subscriptionName,e.sku,e.contractNumber,e.entitlementQuantity,t,n]}))),r().createElement(r().Fragment,null,n&&!o&&r().createElement("div",{className:"entitlement-list-loading-container"},r().createElement(u.qb,null)),i&&!t.valid&&r().createElement("div",{className:"no-entitlements-reason"},r().createElement("p",{tabIndex:i?0:-1,ref:l},t.reason)),i&&t.valid&&r().createElement("div",{ref:l},r().createElement(s.Table,{"aria-label":"Allocations table",cells:c,rows:f,borders:!1,className:"manifests_entitlement-list-table"},r().createElement(s.TableHeader,null),r().createElement(s.TableBody,null))),o&&"Something went wrong.  Please refresh the page and try again.")};var f=n(88767),d=n(6258),p=function(e){return(0,f.useQuery)(["manifestEntitlements",e],(function(){return function(e){var t=d.Z.get("cs_jwt");return fetch("/api/rhsm/v2/manifests/".concat(e,"?include=entitlements"),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()}))}(e)}))};const h=function(e){var t,n=e.uuid,a=e.entitlementsRowRef,i=p(n),o=i.isLoading,l=i.isSuccess,c=i.isError,s=i.data;return r().createElement(m,{isLoading:o,isSuccess:l,isError:c,entitlementsData:null===(t=null==s?void 0:s.body)||void 0===t?void 0:t.entitlementsAttached,entitlementsRowRef:a})};var E=n(84564),v=function(){return v=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},v.apply(this,arguments)};const b=function(e){var t,n=e.scaStatus,a=e.uuid,i="enabled"===n.toLowerCase(),o=(t=(0,f.useQueryClient)(),(0,f.useMutation)((function(e){return n=(t=e).uuid,a=t.newSCAStatus,r=d.Z.get("cs_jwt"),i={simpleContentAccess:a},fetch("/api/rhsm/v2/manifests/".concat(n),{method:"PUT",headers:{Authorization:"Bearer ".concat(r)},body:JSON.stringify(i)}).then((function(e){if(204!==e.status)throw new Error("Status Code ".concat(e.status,".  Error updating SCA status: ").concat(e.statusText,".  "));return{success:!0,status:e.status}})).catch((function(e){console.error(e)}));var t,n,a,r,i}),{onSuccess:function(e,n){if(e){var a=n.uuid,r=n.newSCAStatus;!function(e,t,n){var a=e.getQueryData("manifests").map((function(e){if(e.uuid===t){var a=v({},e);return a.simpleContentAccess=n,a}return e}));e.setQueryData("manifests",a)}(t,a,r),function(e,t,n){var a=e.getQueryData(["manifestEntitlements",t]);if(a){var r={body:v(v({},a.body),{simpleContentAccess:n})};e.setQueryData(["manifestEntitlements",t],r)}}(t,a,r)}}})),l=o.data,s=o.mutate,u=o.isLoading,m=o.isError,p=o.isSuccess,h=function(){!function(e,t){var n="enabled"===t.toLowerCase()?"disabled":"enabled";s({uuid:e,newSCAStatus:n})}(a,n)};return!0===(!0===m||p&&!l)?r().createElement((function(){return r().createElement(r().Fragment,null,r().createElement(E.ZP,{color:"var(--pf-global--danger-color--100)",className:"sca-status-error-icon"}),r().createElement("span",{className:"sca-status-error-msg"},"Something went wrong. Please refresh the page and try again."))}),null):!0===u?r().createElement((function(){return r().createElement(c.Spinner,{size:"lg",className:"sca-status-spinner"})}),null):"disallowed"===n?r().createElement((function(){return r().createElement("p",null,"N/A")}),null):r().createElement((function(){return r().createElement(c.Switch,{id:"sca-status-switch-".concat(a),"data-testid":"sca-status-switch","aria-label":"SCA Status for this Manifest is ".concat(n),isChecked:i,onChange:h,label:"Enabled",labelOff:"Disabled"})}),null)};var g=n(31369),w=n(50470);const y=function(e){var t=e.href,n=e.children;return r().createElement(c.Button,{variant:"link",component:"a",href:t,target:"_blank",isInline:!0,icon:r().createElement(w.ZP,null),iconPosition:"right"},n)},S=function(){return r().createElement(r().Fragment,null,r().createElement(c.Popover,{"aria-label":"Learn more about Simple Content Access",headerContent:"Simple Content Access",bodyContent:r().createElement("p",null,"Simple content access is a set of capabilities that enables a change in the way Red Hat manages its subscription and entitlement enforcement model. When enabled, you are allowed to consume content on your systems without strict entitlement enforcement."),footerContent:r().createElement(y,{href:"https://access.redhat.com/documentation/en-us/subscription_central/2020-10/html/getting_started_with_subscription_watch_with_simple_content_access/assembly-activating-simplecontent#con-what-is-simplecontent_assembly-simplecontent-ctxt"},"Learn more about enabling simple content access on an existing Satellite allocation and manifest")},r().createElement(g.ZP,{className:"sca-more-info-icon","data-testid":"sca-more-info-icon",onClick:function(e){e.stopPropagation()}})))};var C=n(81249),x=n.n(C),k=function(e,t,n){if(n||2===arguments.length)for(var a,r=0,i=t.length;r<i;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},D=function(e){var t=[{title:"Name",transforms:[s.sortable],cellFormatters:[s.expandable]},{title:"Version",transforms:[s.sortable]},{title:r().createElement(r().Fragment,null,"Simple Content Access",r().createElement(S,null)),transforms:[s.sortable,(0,s.cellWidth)(20)]},{title:"UUID",transforms:[s.sortable]}];return!1===e.isSCACapable&&t.splice(2,1),t},I=function(e,t,n){return e.canWriteManifests?r().createElement(r().Fragment,{key:"scastatusswitch-".concat(n)},r().createElement(b,{scaStatus:t,uuid:n})):t},L=function(e,t){return e.filter((function(e){return(e.name||"").toLowerCase().includes(t.toLowerCase().trim())||(e.version||"").toLowerCase().includes(t.toLowerCase().trim())||(e.uuid||"").toLowerCase().includes(t.toLowerCase().trim())}))},A=function(e,t){return L(e,t).length},T=function(e,t,n,a,i,o,l,u,m){var f=function(e,t,n,a,r){var i=(n-1)*a,o=i+a;return function(e,t,n){var a=function(e,t){return L(e,t).map((function(e){var t=e.simpleContentAccess||"disabled",n=x().coerce(e.version),a=x().coerce("6.3");return x().lt(n,a)&&(t="disallowed"),[e.name,e.version,t,e.uuid]}))}(e,t),r=function(e,t){var n=t.direction,a=t.index-1,r=n===s.SortByDirection.desc?-1:1;return e.sort((function(e,t){var n=e[a].toLowerCase(),i=t[a].toLowerCase();return n<i?-1*r:n>i?1*r:0}))}(a,n);return r}(e,t,r).slice(i,o)}(e,n,a,i,m),d=[];return f.forEach((function(e,n){var a=e[3],i=o[a]||!1,s=2*(n+1)-2,m=i?r().createElement(h,{uuid:a,entitlementsRowRef:u[n]}):"",f=function(e,t,n,a){var i=e[0],o=e[1],l=e[2],s=e[3],u=[r().createElement(r().Fragment,{key:"button-".concat(s)},r().createElement(c.Button,{"data-testid":"expand-details-button-".concat(t),variant:"link",onClick:function(){return n(s,t)}},i)),o,I(a,l,s),s];return!1===a.isSCACapable&&u.splice(2,1),u}(e,n,l,t);d.push({isOpen:i,cells:k([],f,!0)}),d.push({parent:s,fullWidth:!0,noPadding:!0,cells:[{title:m}]})})),d},_=n(95841),M=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function l(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}c((a=a.apply(e,t||[])).next())}))},P=function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},B=function(e){var t=d.Z.get("cs_jwt");return fetch("/api/rhsm/v2/manifests/".concat(e,"/export"),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()}))},N=function(e,t){return M(void 0,void 0,void 0,(function(){var n,a;return P(this,(function(r){switch(r.label){case 0:return n=d.Z.get("cs_jwt"),[4,fetch("/api/rhsm/v2/manifests/".concat(e,"/exportJob/").concat(t),{headers:{Authorization:"Bearer ".concat(n)}})];case 1:return 200!==(a=r.sent()).status?[3,2]:[2,a.json()];case 2:return 202!==a.status&&404!==a.status?[3,4]:[4,(5e3,new Promise((function(e){return setTimeout(e,5e3)})))];case 3:return r.sent(),[2,N(e,t)];case 4:throw new Error("Error fetching status of exported manifest")}}))}))},R=function(e,t){var n=d.Z.get("cs_jwt");return fetch("/api/rhsm/v2/manifests/".concat(e,"/export/").concat(t),{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/zip"}}).then((function(e){return e.blob()}))},G=function(){return(0,f.useMutation)((function(e){return t=e.uuid,M(void 0,void 0,void 0,(function(){var e,n;return P(this,(function(a){switch(a.label){case 0:return[4,B(t)];case 1:return e=a.sent(),[4,N(t,e.body.exportJobID)];case 2:return n=a.sent(),[4,R(t,n.body.exportID)];case 3:return[2,a.sent()]}}))}));var t}))};const F=n(41084).Z,O=function(e){var t=e.isExpanded,n=e.titleRef,i=e.drawerRef,o=e.uuid,l=e.onCloseClick,s=e.exportManifest,m=e.exportManifestButtonIsDisabled,d=e.openCurrentEntitlementsListFromPanel,h=e.deleteManifest,E=p(o),v=E.data,b=E.isLoading,g=E.isFetching,w=E.isSuccess,y=E.isError,C=(0,f.useQueryClient)().getQueryData("user");(0,a.useEffect)((function(){!0===t&&(x(),k())}),[t,w,b]);var x=function(){(null==n?void 0:n.current)&&n.current.scrollIntoView({behavior:"smooth",block:"start"})},k=function(){(null==i?void 0:i.current)&&i.current.focus({preventScroll:!0})},D=function(){var e=v.body,t=e.uuid,n=e.name;s(t,n),l()},I=function(){return r().createElement("div",{className:"manifest-detail-drawer-loading","aria-label":"Loading Manifest Details",tabIndex:b?0:-1,ref:i},r().createElement(u.qb,null))},L=function(){return r().createElement(r().Fragment,null,r().createElement("p",{className:"manifest-details-delete-text"},"Deleting a subscription allocation is ",r().createElement("strong",null,"STRONGLY")," discouraged. This action should only be taken in extreme circumstances or for debugging purposes"),r().createElement(c.Button,{variant:"tertiary",onClick:function(){h(o)}},"Delete manifest"))},A=function(){if(!(null==v?void 0:v.body))return r().createElement(u.Bc,null);var e=v.body,t=e.uuid,n=e.name,a=e.version,o=e.createdDate,l=e.createdBy,s=e.lastModified,f=e.entitlementsAttachedQuantity,p=e.simpleContentAccess,h=function(e){return new Date(e).toLocaleString("en-US",{month:"long",year:"numeric",day:"numeric",timeZone:"America/New_York"})};return r().createElement("div",{className:"manifest-details-content"},r().createElement("h3",{tabIndex:w?0:-1,ref:i},n),r().createElement("h4",null,"Details"),r().createElement(c.Grid,null,r().createElement(c.GridItem,{span:6},r().createElement("strong",null,"Name")),r().createElement(c.GridItem,{span:6},n),r().createElement(c.GridItem,{span:6},r().createElement("strong",null,"Type")),r().createElement(c.GridItem,{span:6},"Satellite ",a),r().createElement(c.GridItem,{span:6},r().createElement("strong",null,"UUID")),r().createElement(c.GridItem,{span:6},t)),r().createElement("h4",null,"Subscriptions"),r().createElement(c.Grid,null,r().createElement(c.GridItem,{span:6},r().createElement("strong",null,"Simple content access",r().createElement(S,null))),r().createElement(c.GridItem,{span:6},!0===C.isSCACapable?p:"administratively disabled"),r().createElement(c.GridItem,{span:6},r().createElement("strong",null,"Quantity")),r().createElement(c.GridItem,{span:6},r().createElement(c.Button,{variant:"link",onClick:d,className:"manifest-details-open-entitlements-button"},f))),r().createElement("h4",null,"History"),r().createElement(c.Grid,null,r().createElement(c.GridItem,{span:6},r().createElement("strong",null,"Created")),r().createElement(c.GridItem,{span:6},h(o)),r().createElement(c.GridItem,{span:6},r().createElement("strong",null,"Created by")),r().createElement(c.GridItem,{span:6},l),r().createElement(c.GridItem,{span:6},r().createElement("strong",null,"Last modified date")),r().createElement(c.GridItem,{span:6},h(s))),r().createElement(c.Button,{variant:"tertiary",onClick:D,isDisabled:m},"Export manifest"),C.canWriteManifests&&r().createElement(L,null))};return r().createElement(c.DrawerPanelContent,null,r().createElement(c.DrawerHead,null,r().createElement((function(){return!0===y?r().createElement(u.Bc,null):!0===b||!0===g?r().createElement(I,null):!0===w?r().createElement(A,null):void 0}),null),r().createElement(c.DrawerActions,null,r().createElement(c.DrawerCloseButton,{onClick:function(){l()}}))))};const j=function(e){var t,n=e.handleModalToggle,a=e.onSuccess,i=e.isOpen,o=e.name,l=e.uuid,s=r().useState(!1),u=s[0],m=s[1],p=(0,_.Z)(),h=p.addSuccessNotification,E=p.addErrorNotification,v=(t=(0,f.useQueryClient)(),(0,f.useMutation)((function(e){return function(e){var t=d.Z.get("cs_jwt");return fetch("/api/rhsm/v2/manifests/".concat(e,"?force=true"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){if(204!=e.status)throw new Error("Status Code ".concat(e.status,".  Error deleting manifest: ").concat(e.statusText,"."))}))}(e)}),{onSuccess:function(e,n){t.setQueryData("manifests",(function(e){return e.filter((function(e){return e.uuid!=n}))}))}})),b=v.isError,g=v.isLoading,w=v.isSuccess,y=v.mutate,S=v.reset,C=w||b,x=function(){n(),m(!1)};return w?(a(),h("Manifest ".concat(o," deleted"))):b&&E("Something went wrong. Please try again"),C&&(x(),S()),r().createElement(c.Modal,{isOpen:i,onClose:x,title:g?"Deleting ".concat(o,"..."):"Delete ".concat(o),variant:c.ModalVariant.small,titleIconVariant:"warning",actions:g?[]:[r().createElement(c.Button,{key:"cancel",variant:"link",onClick:x},"NO, CANCEL"),r().createElement(c.Button,{key:"confirm",variant:"danger",isDisabled:!u,onClick:function(){return y(l)}},"YES, DELETE")]},g?r().createElement(c.EmptyState,null,r().createElement(c.EmptyStateIcon,{variant:"container",component:c.Spinner})):r().createElement(c.TextContent,null,r().createElement(c.Text,{component:c.TextVariants.p},"Deleting a manifest is STRONGLY discouraged. Deleting a manifest will:"),r().createElement(c.List,null,r().createElement(c.ListItem,null,"Delete all subscriptions that are attached to running hosts."),r().createElement(c.ListItem,null,"Delete all subscriptions attached to activation keys."),r().createElement(c.ListItem,null,"Disable Red Hat Insights."),r().createElement(c.ListItem,null,"Require you to upload the manifest and re-attach subscriptions to hosts and activation keys.")),r().createElement(c.Text,{component:c.TextVariants.p},r().createElement("strong",null,"Caution: this operation is permanent and cannot be undone.")),r().createElement(c.Checkbox,{label:"Are you sure you want to delete this manifest?",isChecked:u,id:"confirmation_checkbox",onChange:function(e,t){m(t.target.checked)}})))};var Z=function(){return Z=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Z.apply(this,arguments)};const Q=function(e){var t=e.data,n=e.isFetching,i=e.user,o=(0,a.useState)(1),l=o[0],m=o[1],f=(0,a.useState)(10),d=f[0],p=f[1],h=(0,a.useState)(""),E=h[0],v=h[1],b=(0,a.useState)({index:1,direction:s.SortByDirection.asc}),g=b[0],w=b[1],y=(0,a.useState)({}),S=y[0],C=y[1],x=(0,a.useState)(""),k=x[0],I=x[1],L=(0,a.useState)(!1),M=L[0],P=L[1],B=(0,a.useState)(null),N=B[0],R=B[1],Q=(0,a.useState)(!1),U=Q[0],V=Q[1],z=(0,a.useState)(""),W=z[0],H=z[1],q=(0,a.useState)(""),Y=q[0],J=q[1],K=(0,a.useState)(!1),X=K[0],$=K[1],ee=(0,a.useState)(""),te=ee[0],ne=ee[1],ae=(0,a.useState)(""),re=ae[0],ie=ae[1],oe=(0,a.useRef)(null),le=(0,a.useRef)(null),ce=new Array(10).fill(null).map((function(){return(0,a.useRef)(null)})),se=(0,_.Z)(),ue=se.addInfoNotification,me=se.addSuccessNotification,fe=se.addErrorNotification,de=G(),pe=de.data,he=de.mutate,Ee=de.isLoading,ve=de.isSuccess,be=de.isError,ge=function(){P(!1),I("")},we=function(e,t){p(t),m(1)},ye=function(e,t){m(t),De()},Se=function(){v(""),m(1),De()},Ce=function(){V(!U)},xe=function(e){H(e),J(function(e,t){var n;return null===(n=e.find((function(e){return e.uuid==t})))||void 0===n?void 0:n.name}(t,e)),Ce()},ke=function(e,t){var n=Z({},S);n[e]=t,C(n)},De=function(){C({})},Ie=function(e,t){ne(t),$(!0),he({uuid:e});var n=ue("Manifest ".concat(t," exporting. This may take some time. Please wait."),{hasTimeout:!1});ie(n)};if(ve&&X){var Le=window.URL.createObjectURL(pe);me("Manifest ".concat(te," Exported"),{hasTimeout:!1,alertLinkHref:Le,alertLinkText:"Download Manifest",alertLinkIsDownload:!0,keyOfAlertToReplace:re}),ie(""),$(!1)}be&&X&&(fe("Something went wrong. Please refresh the page and try again.",{hasTimeout:!1,keyOfAlertToReplace:re}),ie(""),$(!1));var Ae,Te=function(e){return void 0===e&&(e=c.PaginationVariant.top),r().createElement(c.Pagination,{isDisabled:n,itemCount:A(t,E),perPage:d,page:l,onSetPage:ye,onPerPageSelect:we,variant:e})};return r().createElement(r().Fragment,null,0===(null==t?void 0:t.length)&&i.canWriteManifests&&r().createElement(u.s3,null),((null==t?void 0:t.length)>0||!i.canWriteManifests)&&r().createElement(c.PageSection,{variant:"light"},r().createElement(c.Drawer,{isExpanded:M},r().createElement(c.DrawerContent,{panelContent:k?r().createElement(O,{uuid:k,exportManifest:Ie,exportManifestButtonIsDisabled:Ee,onCloseClick:ge,isExpanded:M,titleRef:oe,drawerRef:le,openCurrentEntitlementsListFromPanel:function(){ge(),ke(k,!0);var e=ce[N];(null==e?void 0:e.current)&&e.current.scrollIntoView({behavior:"smooth",block:"center"})},deleteManifest:xe}):""},r().createElement(c.DrawerContentBody,null,r().createElement(c.Title,{headingLevel:"h2"},r().createElement("span",{ref:oe},"Manifests"),!n&&r().createElement(c.Badge,{isRead:!0},A(t,E))),r().createElement(c.Flex,{direction:{default:"column",md:"row"},justifyContent:{default:"justifyContentSpaceBetween"}},r().createElement(c.FlexItem,null,r().createElement(c.Split,{hasGutter:!0},t.length>0&&r().createElement(c.SplitItem,{isFilled:!0},r().createElement(c.SearchInput,{placeholder:"Filter by name, version or UUID",value:E,onChange:function(e){v(e),m(1),De()},onClear:Se})),!0===i.canWriteManifests&&r().createElement(c.SplitItem,null,r().createElement(F,null)))),r().createElement(c.FlexItem,{align:{default:"alignRight"}},Te())),r().createElement(s.Table,{"aria-label":"Satellite Manifest Table",cells:D(i),rows:n?[]:T(t,i,E,l,d,S,(function(e,t){!function(e,t){I(e),R(t),P(!0),(null==oe?void 0:oe.current)&&oe.current.scrollIntoView({behavior:"smooth",block:"start"}),(null==le?void 0:le.current)&&le.current.focus({preventScroll:!0})}(e,t)}),ce,g),onCollapse:function(e,t,n,a){var r=a.uuid.title;ke(r,!S[r])},sortBy:g,onSort:function(e,t,n){w({index:t,direction:n}),m(1),De()},actions:(Ae=[{title:"Export",onClick:function(e,t,n){var a=n.cells[0].props.children.props.children,r=n.uuid.title;Ie(r,a)}}],i.canWriteManifests&&Ae.push({title:"Delete",onClick:function(e,t,n){xe(n.uuid.title)}}),Ae),areActionsDisabled:function(){return Ee}},r().createElement(s.TableHeader,null),r().createElement(s.TableBody,null)),0===A(t,E)&&t.length>0&&r().createElement(u.qx,{clearFilters:Se}),!n&&0===t.length&&r().createElement(u.Ox,null),n&&r().createElement(u.qb,null),Te(c.PaginationVariant.bottom))))),r().createElement(j,{uuid:W,name:Y,isOpen:U,handleModalToggle:Ce,onSuccess:ge}))};var U=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function l(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}c((a=a.apply(e,t||[])).next())}))},V=function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},z=function(e){return void 0===e&&(e=0),U(void 0,void 0,void 0,(function(){var t,n,a,r,i,o,l;return V(this,(function(c){switch(c.label){case 0:return t=d.Z.get("cs_jwt"),[4,fetch("/api/rhsm/v2/manifests?type=Satellite&offset=".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})];case 1:return[4,c.sent().json()];case 2:return n=c.sent(),a=n.pagination,r=a.count,i=a.limit,o=n.body,r!==i?[3,4]:[4,z(e+i)];case 3:l=c.sent(),o.push.apply(o,l),c.label=4;case 4:return[2,o]}}))}))},W=n(20167);const H=function(){var e=(0,f.useQuery)("manifests",(function(){return U(void 0,void 0,void 0,(function(){return V(this,(function(e){switch(e.label){case 0:return[4,z()];case 1:return[2,(t=e.sent(),t.filter((function(e){return parseInt(e.version)>=6})))]}var t}))}))})),t=e.isLoading,n=e.isFetching,a=e.error,c=e.data,s=(0,f.useQueryClient)().getQueryData("user");return r().createElement(r().Fragment,null,r().createElement(o.Z,null,r().createElement(l.Z,{title:"Manifests"}),r().createElement("p",null,"Export subscriptions to your on-premise subscription management application."," ",r().createElement(y,{href:"https://access.redhat.com/documentation/en-us/subscription_central/2021/html/creating_and_managing_manifests_for_a_connected_satellite_server/index"},"Learn more about creating and managing manifests for a connected Satellite Server"))),r().createElement(i.Z,null,r().createElement(r().Fragment,null,t&&!a&&r().createElement(u.qb,null),!t&&!a&&r().createElement(Q,{data:c,user:s,isFetching:n}),a&&r().createElement(W.Z,null))))}}}]);
//# sourceMappingURL=../sourcemaps/639.7b3f0fa7f4abe21e579b92b474f50f3a.js.map