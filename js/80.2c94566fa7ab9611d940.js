/*! For license information please see 80.2c94566fa7ab9611d940.js.LICENSE.txt */
(self.webpackChunksubscription_central=self.webpackChunksubscription_central||[]).push([[80],{4564:(e,t,n)=>{"use strict";t.MX={name:"ExclamationCircleIcon",height:512,width:512,svgPath:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z",yOffset:0,xOffset:0},t.$O=n(5183).IU(t.MX),t.ZP=t.$O},470:(e,t,n)=>{"use strict";t.mq={name:"ExternalLinkAltIcon",height:512,width:512,svgPath:"M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z",yOffset:0,xOffset:0},t.LA=n(5183).IU(t.mq),t.ZP=t.LA},7673:(e,t,n)=>{"use strict";t.gZ={name:"QuestionCircleIcon",height:512,width:512,svgPath:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",yOffset:0,xOffset:0},t.pT=n(5183).IU(t.gZ),t.pT},2112:(e,t,n)=>{"use strict";t.MS={name:"WrenchIcon",height:512,width:512,svgPath:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z",yOffset:0,xOffset:0},t.R0=n(5183).IU(t.MS),t.ZP=t.R0},4748:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>l});var r=n(5893),a=n(2950),i=n(4184),o=n.n(i),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},c.apply(this,arguments)};const l=function(e){var t=e.children,n=e.className,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["children","className"]);return(0,a.useEffect)((function(){console.error('Using deprecated "Main" component. Do not use it. Either remove it from your JSX or replace it by "section" HTML element.')}),[]),(0,r.jsx)("section",c({},i,{className:"".concat(o()(n,"pf-l-page__main-section pf-c-page__main-section"))},{children:t}))}},2080:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>te});var r=n(2950),a=n.n(r),i=n(4748),o=n(5893),c=n(4184),l=n.n(c);const s=a().createContext("light");var u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},u.apply(this,arguments)};const f=function(e){var t=e.className,n=e.children,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["className","children"]),a=l()(t,"pf-l-page-header","pf-c-page-header","pf-l-page__main-section","pf-c-page__main-section");return(0,o.jsx)(s.Consumer,{children:function(e){var t,i;void 0===e&&(e="light");var c=l()(((t={})["pf-m-".concat(e,"-200")]="dark"===e,t),((i={})["pf-m-light"]="light"===e,i));return(0,o.jsx)("section",u({},r,{className:"".concat(a," ").concat(c),"widget-type":"InsightsPageHeader"},{children:n}))}})};var m=n(6848),d=n(271),p=n(8494),h=n(8767),b=n(7255),v=function(e){var t=(0,b.dQ)();return(0,h.useQuery)(["manifestEntitlements",e],(function(){return function(e){return function(t){return n=void 0,r=void 0,i=function(){var n,r,a,i,o;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}(this,(function(c){switch(c.label){case 0:return n=fetch,r=["/api/rhsm/v2/manifests/".concat(t,"?include=entitlements")],i={},o={},a="Bearer ".concat,[4,e];case 1:return[2,n.apply(void 0,r.concat([(i.headers=(o.Authorization=a.apply("Bearer ",[c.sent()]),o),i)])).then((function(e){if(200!=e.status)throw new Error("Failed to fetch manifest entitlements: ".concat(e.statusText));return e.json()}))]}}))},new((a=Promise)||(a=Promise))((function(e,t){function o(e){try{l(i.next(e))}catch(e){t(e)}}function c(e){try{l(i.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,c)}l((i=i.apply(n,r||[])).next())}));var n,r,a,i}}(t)(e)}))};const E=function(e){var t,n=e.entitlementsRowRef,i=e.uuid,o=v(i),c=o.isError,l=o.isSuccess,s=o.isLoading,u=o.data,f=null===(t=null==u?void 0:u.body)||void 0===t?void 0:t.entitlementsAttached;(0,r.useEffect)((function(){(null==n?void 0:n.current)&&(n.current.scrollIntoView({behavior:"smooth",block:"center"}),n.current.focus({preventScroll:!0}))}),[l]);var m=function(e){if(!e)return"";var t=e.substr(0,4),n=e.substr(5,2),r=e.substr(8,2);return"".concat(t,"-").concat(n,"-").concat(r)},h=[];return(null==f?void 0:f.value)&&(h=null==f?void 0:f.value.map((function(e){var t=m(e.startDate),n=m(e.endDate);return{subscriptionName:e.subscriptionName,sku:e.sku,contractNumber:e.contractNumber,entitlementQuantity:e.entitlementQuantity,startDate:t,endDate:n}}))),a().createElement(a().Fragment,null,s&&!c&&a().createElement("div",{className:"sub-entitlement-list-loading-container"},a().createElement(p.qb,null)),l&&!f.valid&&a().createElement("div",{className:"sub-no-entitlements-reason"},a().createElement("p",{tabIndex:l?0:-1,ref:n},f.reason)),l&&f.valid&&a().createElement(d.TableComposable,{ref:n,"aria-label":"Allocations table",variant:"compact",borders:!1,isNested:!0,className:"sub-c-table-manifests-entitlement-list",ouiaId:"entitlementTable/".concat(i),ouiaSafe:!0},a().createElement(d.Thead,null,a().createElement(d.Tr,{ouiaId:"entitlementTable/".concat(i,"/head"),ouiaSafe:!0},a().createElement(d.Th,null,"Subscription name"),a().createElement(d.Th,null,"SKU"),a().createElement(d.Th,null,"Contract number"),a().createElement(d.Th,null,"Quantity"),a().createElement(d.Th,null,"Start date"),a().createElement(d.Th,null,"End date"))),a().createElement(d.Tbody,null,h.map((function(e,t){return a().createElement(d.Tr,{key:t,ouiaId:"entitlementTable/".concat(i,"/row").concat(t),ouiaSafe:!0},a().createElement(d.Td,null,e.subscriptionName),a().createElement(d.Td,null,e.sku),a().createElement(d.Td,null,e.contractNumber),a().createElement(d.Td,null,e.entitlementQuantity),a().createElement(d.Td,null,e.startDate),a().createElement(d.Td,null,e.endDate))})))),c&&"Something went wrong.  Please refresh the page and try again.")};var y=n(7673),g=n(470);const w=function(e){var t=e.href,n=e.children;return a().createElement(m.Button,{variant:"link",component:"a",href:t,target:"_blank",isInline:!0,icon:a().createElement(g.ZP,null),iconPosition:"right"},n)},S=function(){return a().createElement(a().Fragment,null,a().createElement(m.Popover,{"aria-label":"Learn more about Simple Content Access",headerContent:"Simple Content Access",bodyContent:a().createElement("p",null,"Simple content access is a set of capabilities that enables a change in the way Red Hat manages its subscription and entitlement enforcement model. When enabled, you are allowed to consume content on your systems without strict entitlement enforcement."),footerContent:a().createElement(w,{href:"https://access.redhat.com/documentation/en-us/subscription_central/2023/html/getting_started_with_simple_content_access/con-what-is-simplecontent_assembly-simplecontent-ctxt"},"Learn more about enabling simple content access on an existing Satellite allocation and manifest")},a().createElement(y.pT,{className:"sca-more-info-icon","data-testid":"sca-more-info-icon",onClick:function(e){e.stopPropagation()}})))};var x=n(1249),C=n.n(x),T=function(e,t){return e.filter((function(e){return(e.name||"").toLowerCase().includes(t.toLowerCase().trim())||(e.version||"").toLowerCase().includes(t.toLowerCase().trim())||(e.uuid||"").toLowerCase().includes(t.toLowerCase().trim())}))},k=function(e,t){return T(e,t).length},I=function(e){return e.split(".").map((function(e){return+e+1e5})).join(".")},P=function(e,t,n,r,i,o,c,l,s,u){var f=function(e,t,n,r,a,i){var o=(n-1)*r,c=o+r;return function(e,t,n,r){var a=function(e,t){return T(e,t).map((function(e){var t=e.simpleContentAccess||"disabled",n=C().coerce(e.version),r=C().coerce("6.3");return C().lt(n,r)&&(t="disallowed"),{name:e.name,version:e.version,scaStatus:t,uuid:e.uuid}}))}(e,t),i=function(e,t,n){var r=n===d.SortByDirection.desc?-1:1;return e.sort((function(e,n){var a="version"==t?I(e.version):e[t].toLowerCase(),i="version"==t?I(n.version):n[t].toLowerCase();return a<i?-1*r:a>i?1*r:0}))}(a,n,r);return i}(e,t,a,i).slice(o,c)}(e,n,r,i,s,u),m=[];return f.forEach((function(e,t){var n=o[e.uuid]||!1,r={parent:2*(t+1)-2,content:n?a().createElement(E,{uuid:e.uuid,entitlementsRowRef:l[t]}):""};m.push({isOpen:n,cells:e,details:r})})),m},O=n(3217),D=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((r=r.apply(e,t||[])).next())}))},A=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},M=function(e){return function(t){return D(void 0,void 0,Promise,(function(){var n,r,a,i,o;return A(this,(function(c){switch(c.label){case 0:return n=fetch,r=["/api/rhsm/v2/manifests/".concat(t,"/export")],i={},o={},a="Bearer ".concat,[4,e];case 1:return[2,n.apply(void 0,r.concat([(i.headers=(o.Authorization=a.apply("Bearer ",[c.sent()]),o),i)])).then((function(e){if(200!=e.status)throw new Error("Failed to trigger export: ".concat(e.statusText));return e.json()}))]}}))}))}},L=function(e){return function(t,n){return D(void 0,void 0,Promise,(function(){var r,a,i,o,c,l;return A(this,(function(s){switch(s.label){case 0:return a=fetch,i=["/api/rhsm/v2/manifests/".concat(t,"/exportJob/").concat(n)],c={},l={},o="Bearer ".concat,[4,e];case 1:return[4,a.apply(void 0,i.concat([(c.headers=(l.Authorization=o.apply("Bearer ",[s.sent()]),l),c)]))];case 2:return 200!==(r=s.sent()).status?[3,3]:[2,r.json()];case 3:return 202!==r.status&&404!==r.status?[3,5]:[4,(5e3,new Promise((function(e){return setTimeout(e,5e3)})))];case 4:return s.sent(),[2,L(e)(t,n)];case 5:throw new Error("Error fetching status of exported manifest")}}))}))}},N=function(e){return function(t,n){return D(void 0,void 0,Promise,(function(){var r,a,i,o,c;return A(this,(function(l){switch(l.label){case 0:return r=fetch,a=["/api/rhsm/v2/manifests/".concat(t,"/export/").concat(n)],o={},c={},i="Bearer ".concat,[4,e];case 1:return[2,r.apply(void 0,a.concat([(o.headers=(c.Authorization=i.apply("Bearer ",[l.sent()]),c["Content-Type"]="application/zip",c),o)])).then((function(e){if(200!=e.status)throw new Error("Could not download manifest: ".concat(e.statusText));return e.blob()}))]}}))}))}},B=function(){var e=(0,b.dQ)();return(0,h.useMutation)((function(t){return function(e){return function(t){return D(void 0,void 0,Promise,(function(){var n,r;return A(this,(function(a){switch(a.label){case 0:return[4,M(e)(t)];case 1:return n=a.sent(),[4,L(e)(t,n.body.exportJobID)];case 2:return r=a.sent(),[4,N(e)(t,r.body.exportID)];case 3:return[2,a.sent()]}}))}))}}(e)(t.uuid)}))};const _=n(6733).Z;var j=n(5984);const G=function(e){var t=e.isExpanded,n=e.titleRef,i=e.drawerRef,o=e.uuid,c=e.onCloseClick,l=e.exportManifest,s=e.exportManifestButtonIsDisabled,u=e.openCurrentEntitlementsListFromPanel,f=e.deleteManifest,d=v(o),b=d.data,E=d.isLoading,y=d.isFetching,g=d.isSuccess,w=d.isError,x=(0,h.useQueryClient)().getQueryData("user");(0,r.useEffect)((function(){!0===t&&(C(),T())}),[t,g,E]);var C=function(){(null==n?void 0:n.current)&&n.current.scrollIntoView({behavior:"smooth",block:"start"})},T=function(){(null==i?void 0:i.current)&&i.current.focus({preventScroll:!0})},k=function(){var e=b.body,t=e.uuid,n=e.name;l(t,n),c()},I=function(){return a().createElement("div",{className:"sub-manifest-detail-drawer-loading","aria-label":"Loading Manifest Details",tabIndex:E?0:-1,ref:i},a().createElement(p.qb,null))},P=function(){return a().createElement(a().Fragment,null,a().createElement("p",{className:"sub-manifest-details-delete-text"},"Deleting a subscription allocation is ",a().createElement("strong",null,"STRONGLY")," discouraged. This action should only be taken in extreme circumstances or for debugging purposes"),a().createElement(m.Button,{variant:"tertiary",onClick:function(){f(o)},isDisabled:!x.canWriteManifests},"Delete manifest"))},O=function(){if(!(null==b?void 0:b.body))return a().createElement(j.Z,null);var e=b.body,t=e.uuid,n=e.name,r=e.version,o=e.createdDate,c=e.createdBy,l=e.lastModified,f=e.entitlementsAttachedQuantity,d=e.simpleContentAccess,p=function(e){return new Date(e).toLocaleString("en-US",{month:"long",year:"numeric",day:"2-digit",timeZone:"America/New_York"})};return a().createElement("div",null,a().createElement("h3",{tabIndex:g?0:-1,ref:i},n),a().createElement("h4",null,"Details"),a().createElement(m.Grid,null,a().createElement(m.GridItem,{span:6},a().createElement("strong",null,"Name")),a().createElement(m.GridItem,{span:6},n),a().createElement(m.GridItem,{span:6},a().createElement("strong",null,"Type")),a().createElement(m.GridItem,{span:6},"Satellite ",r),a().createElement(m.GridItem,{span:6},a().createElement("strong",null,"UUID")),a().createElement(m.GridItem,{span:6},t)),a().createElement("h4",null,"Subscriptions"),a().createElement(m.Grid,null,a().createElement(m.GridItem,{span:6},a().createElement("strong",null,"Simple content access",a().createElement(S,null))),a().createElement(m.GridItem,{span:6},!0===x.isSCACapable?d:"administratively disabled"),a().createElement(m.GridItem,{span:6},a().createElement("strong",null,"Quantity")),a().createElement(m.GridItem,{span:6},a().createElement(m.Button,{variant:"link",onClick:u,className:"sub-c-button-manifest-details-open-entitlements"},f))),a().createElement("h4",null,"History"),a().createElement(m.Grid,null,a().createElement(m.GridItem,{span:6},a().createElement("strong",null,"Created")),a().createElement(m.GridItem,{span:6},p(o)),a().createElement(m.GridItem,{span:6},a().createElement("strong",null,"Created by")),a().createElement(m.GridItem,{span:6},c),a().createElement(m.GridItem,{span:6},a().createElement("strong",null,"Last modified date")),a().createElement(m.GridItem,{span:6},p(l))),a().createElement(m.Button,{variant:"tertiary",onClick:k,isDisabled:s},"Export manifest"),a().createElement(P,null))};return a().createElement(m.DrawerPanelContent,{className:"sub-c-drawer__panel-manifest-details"},a().createElement(m.DrawerHead,null,a().createElement((function(){return!0===w?a().createElement(j.Z,null):!0===E||!0===y?a().createElement(I,null):!0===g?a().createElement(O,null):void 0}),null),a().createElement(m.DrawerActions,null,a().createElement(m.DrawerCloseButton,{onClick:function(){c()}}))))};var Q=function(){var e=(0,h.useQueryClient)(),t=(0,b.dQ)();return(0,h.useMutation)((function(e){return function(e){return function(t){return n=void 0,r=void 0,i=function(){var n,r,a,i,o;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}(this,(function(c){switch(c.label){case 0:return n=fetch,r=["/api/rhsm/v2/manifests/".concat(t,"?force=true")],i={method:"DELETE"},o={},a="Bearer ".concat,[4,e];case 1:return[2,n.apply(void 0,r.concat([(i.headers=(o.Authorization=a.apply("Bearer ",[c.sent()]),o),i)])).then((function(e){if(204!=e.status)throw new Error("Status Code ".concat(e.status,".  Error deleting manifest: ").concat(e.statusText,"."))}))]}}))},new((a=void 0)||(a=Promise))((function(e,t){function o(e){try{l(i.next(e))}catch(e){t(e)}}function c(e){try{l(i.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,c)}l((i=i.apply(n,r||[])).next())}));var n,r,a,i}}(t)(e)}),{onSuccess:function(t,n){e.setQueryData("manifests",(function(e){return e.filter((function(e){return e.uuid!=n}))}))}})};const F=function(e){var t=e.handleModalToggle,n=e.onSuccess,r=e.isOpen,i=e.name,o=e.uuid,c=a().useState(!1),l=c[0],s=c[1],u=(0,O.Z)(),f=u.addSuccessNotification,d=u.addErrorNotification,p=Q(),h=p.isError,b=p.isLoading,v=p.isSuccess,E=p.mutate,y=p.reset,g=v||h,w=function(e,t){s(t.target.checked)},S=function(){t(),s(!1)};return v?(n(),f("Manifest ".concat(i," deleted"))):h&&d("Something went wrong. Please try again"),g&&(S(),y()),a().createElement(m.Modal,{isOpen:r,onClose:S,title:b?"Deleting manifest...":"Delete manifest?",variant:m.ModalVariant.small,titleIconVariant:"warning",actions:b?[]:[a().createElement(m.Button,{key:"confirm",variant:"danger",isDisabled:!l,onClick:function(){return E(o)}},"Delete"),a().createElement(m.Button,{key:"cancel",variant:"link",onClick:S},"Cancel")]},a().createElement((function(){return b?a().createElement(m.EmptyState,null,a().createElement(m.EmptyStateIcon,{variant:"container",component:m.Spinner})):a().createElement(m.TextContent,null,a().createElement(m.Text,{component:m.TextVariants.p},a().createElement("b",null,i)," will be permanently deleted, and the connection to Red Hat Insights will be broken. To enable again, you must create, export, download, and import a new manifest into your connected Satellite Server."),a().createElement(m.Checkbox,{label:"I acknowledge that this action cannot be undone",isChecked:l,id:"confirmation_checkbox",onChange:w}))}),null))};var R=n(4564),V=function(){return V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},V.apply(this,arguments)},Z=function(){var e=(0,h.useQueryClient)(),t=(0,b.dQ)();return(0,h.useMutation)((function(e){return function(e){return function(t){return n=void 0,r=void 0,i=function(){var n,r,a,i,o,c,l,s;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}(this,(function(u){switch(u.label){case 0:return n=t.uuid,r=t.newSCAStatus,a={simpleContentAccess:r},i=fetch,o=["/api/rhsm/v2/manifests/".concat(n)],l={method:"PUT"},s={},c="Bearer ".concat,[4,e];case 1:return[2,i.apply(void 0,o.concat([(l.headers=(s.Authorization=c.apply("Bearer ",[u.sent()]),s),l.body=JSON.stringify(a),l)])).then((function(e){if(204!==e.status)throw new Error("Status Code ".concat(e.status,".  Error updating SCA status: ").concat(e.statusText,".  "));return{success:!0,status:e.status}})).catch((function(e){console.error(e)}))]}}))},new((a=Promise)||(a=Promise))((function(e,t){function o(e){try{l(i.next(e))}catch(e){t(e)}}function c(e){try{l(i.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,c)}l((i=i.apply(n,r||[])).next())}));var n,r,a,i}}(t)(e)}),{onSuccess:function(t,n){if(t){var r=n.uuid,a=n.newSCAStatus;!function(e,t,n){var r=e.getQueryData("manifests").map((function(e){if(e.uuid===t){var r=V({},e);return r.simpleContentAccess=n,r}return e}));e.setQueryData("manifests",r)}(e,r,a),function(e,t,n){var r=e.getQueryData(["manifestEntitlements",t]);if(r){var a={body:V(V({},r.body),{simpleContentAccess:n})};e.setQueryData(["manifestEntitlements",t],a)}}(e,r,a)}}})};const z=function(e){var t=e.scaStatus,n=e.uuid,r=e.user,i="enabled"===t.toLowerCase(),o=Z(),c=o.data,l=o.mutate,s=o.isLoading,u=o.isError,f=o.isSuccess,d=function(){!function(e,t){var n="enabled"===t.toLowerCase()?"disabled":"enabled";l({uuid:e,newSCAStatus:n})}(n,t)};return!0===u||f&&!c?a().createElement((function(){return a().createElement(a().Fragment,null,a().createElement(R.ZP,{color:"var(--pf-global--danger-color--100)",className:"sca-status-error-icon"}),a().createElement("span",{className:"sca-status-error-msg"},"Something went wrong. Please refresh the page and try again."))}),null):s?a().createElement((function(){return a().createElement(m.Spinner,{size:"lg",className:"sca-status-spinner"})}),null):"disallowed"==t?a().createElement((function(){return a().createElement("p",null,"N/A")}),null):a().createElement((function(){return a().createElement(m.Switch,{id:"sca-status-switch-".concat(n),"data-testid":"sca-status-switch","aria-label":"SCA Status for this Manifest is ".concat(t),isChecked:i,onChange:d,label:"Enabled",labelOff:"Disabled",isDisabled:!r.canWriteManifests})}),null)};var U=function(){return U=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},U.apply(this,arguments)};const H=function(e){var t=e.data,n=e.isFetching,i=e.user,o=(0,r.useState)(1),c=o[0],l=o[1],s=(0,r.useState)(10),u=s[0],f=s[1],h=(0,r.useState)(""),b=h[0],v=h[1],E=(0,r.useState)({index:0,direction:d.SortByDirection.asc}),y=E[0],g=E[1],w=(0,r.useState)({}),x=w[0],C=w[1],T=(0,r.useState)(""),I=T[0],D=T[1],A=(0,r.useState)(!1),M=A[0],L=A[1],N=(0,r.useState)(null),j=N[0],Q=N[1],R=(0,r.useState)(!1),V=R[0],Z=R[1],H=(0,r.useState)(""),q=H[0],W=H[1],K=(0,r.useState)(""),Y=K[0],J=K[1],X=(0,r.useState)(!1),$=X[0],ee=X[1],te=(0,r.useState)(""),ne=te[0],re=te[1],ae=(0,r.useState)(""),ie=ae[0],oe=ae[1],ce=(0,r.useRef)(null),le=(0,r.useRef)(null),se=new Array(10).fill(null).map((function(){return(0,r.useRef)(null)})),ue=(0,O.Z)(),fe=ue.addInfoNotification,me=ue.addSuccessNotification,de=ue.addErrorNotification,pe=B(),he=pe.data,be=pe.mutate,ve=pe.isLoading,Ee=pe.isSuccess,ye=pe.isError,ge=[],we=function(){L(!1),D("")},Se=function(e,t){f(t),l(1)},xe=function(e,t){l(t),De()},Ce=function(){v(""),l(1),De()},Te=function(e,t,n){g({index:t,direction:n}),l(1),De()},ke=function(){Z(!V)},Ie=function(e){W(e),J(function(e,t){var n;return null===(n=e.find((function(e){return e.uuid==t})))||void 0===n?void 0:n.name}(t,e)),ke()},Pe=function(e,t){!function(e,t){D(e),Q(t),L(!0),(null==ce?void 0:ce.current)&&ce.current.scrollIntoView({behavior:"smooth",block:"start"}),(null==le?void 0:le.current)&&le.current.focus({preventScroll:!0})}(e,t)},Oe=function(e,t){var n=U({},x);n[e]=t,C(n)},De=function(){C({})},Ae=function(e,t){re(t),ee(!0),be({uuid:e});var n=fe("Manifest ".concat(t," exporting. This may take some time. Please wait."),{hasTimeout:!1});oe(n)};if(Ee&&$){var Me=window.URL.createObjectURL(he);me("Manifest ".concat(ne," exported"),{hasTimeout:!1,alertLinkHref:Me,alertLinkText:"Download manifest",alertLinkIsDownload:!0,keyOfAlertToReplace:ie}),oe(""),ee(!1)}ye&&$&&(de("Something went wrong. Please refresh the page and try again.",{hasTimeout:!1,keyOfAlertToReplace:ie}),oe(""),ee(!1));var Le=function(e){return void 0===e&&(e=m.PaginationVariant.top),a().createElement(m.Pagination,{isCompact:e==m.PaginationVariant.top,isDisabled:n,itemCount:k(t,b),perPage:u,page:c,onSetPage:xe,onPerPageSelect:Se,variant:e})};return a().createElement(a().Fragment,null,0===(null==t?void 0:t.length)&&i.canWriteManifests&&a().createElement(p.s3,{user:i}),((null==t?void 0:t.length)>0||!i.canWriteManifests)&&a().createElement(m.Drawer,{isExpanded:M,className:"sub-c-drawer-satellite-manifest"},a().createElement(m.DrawerContent,{panelContent:I?a().createElement(G,{uuid:I,exportManifest:Ae,exportManifestButtonIsDisabled:ve,onCloseClick:we,isExpanded:M,titleRef:ce,drawerRef:le,openCurrentEntitlementsListFromPanel:function(){we(),Oe(I,!0);var e=se[j];(null==e?void 0:e.current)&&e.current.scrollIntoView({behavior:"smooth",block:"center"})},deleteManifest:Ie}):""},a().createElement(m.DrawerContentBody,null,a().createElement(m.PageSection,{variant:m.PageSectionVariants.light},a().createElement(m.Flex,{direction:{default:"column",md:"row"},justifyContent:{default:"justifyContentSpaceBetween"}},a().createElement(m.FlexItem,null,a().createElement(m.Split,{hasGutter:!0},t.length>0&&a().createElement(m.SplitItem,{isFilled:!0},a().createElement(m.SearchInput,{placeholder:"Filter by name, version or UUID",value:b,onChange:function(e,t){v(t),l(1),De()},onClear:Ce})),a().createElement(m.SplitItem,null,a().createElement(_,{user:i})))),a().createElement(m.FlexItem,{align:{default:"alignRight"}},Le()))),a().createElement(d.TableComposable,{"aria-label":"Satellite Manifest Table",variant:"compact",ouiaId:"manifestTable",ouiaSafe:!0},a().createElement(d.Thead,null,a().createElement(d.Tr,{ouiaId:"manifestTable/head",ouiaSafe:!0},a().createElement(d.Th,null),function(e){var t=[{label:"Name",sortKey:"name"},{label:"Version",sortKey:"version"},{label:a().createElement(a().Fragment,{key:"0"},"Simple Content Access",a().createElement(S,null)),sortKey:"scaStatus"},{label:"UUID",sortKey:"uuid"}];return!1===e.isSCACapable&&t.splice(2,1),t}(i).map((function(e,t){return ge.push(e.sortKey),a().createElement(d.Th,{key:t,sort:(n=t,{sortBy:{index:y.index,direction:y.direction,defaultDirection:d.SortByDirection.asc},onSort:Te,columnIndex:n})},e.label);var n})),a().createElement(d.Td,null))),(n?[]:P(t,0,b,c,u,x,0,se,ge[y.index],y.direction)).map((function(e,t){var n,r,o=e.cells,c=ge.length+2;return a().createElement(d.Tbody,{key:t,isExpanded:e.isOpen},a().createElement(d.Tr,{ouiaId:"manifestTable/row".concat(t),ouiaSafe:!0},a().createElement(d.Td,{expand:{rowIndex:t,isExpanded:e.isOpen,onToggle:function(){return e=o.uuid,void Oe(e,!x[e]);var e}}}),a().createElement(d.Td,null,a().createElement(m.Button,{"data-testid":"expand-details-button-".concat(t),variant:"link",onClick:function(){return Pe(o.uuid,t)}},o.name)),a().createElement(d.Td,null,o.version),i.isSCACapable&&a().createElement(d.Td,null,a().createElement(z,{scaStatus:o.scaStatus,uuid:o.uuid,user:i})),a().createElement(d.Td,null,o.uuid),a().createElement(d.Td,null,a().createElement(d.ActionsColumn,{items:(n=o.uuid,r=o.name,[{title:"Export",disabled:!1,onClick:function(){Ae(n,r)},variant:"link"},{title:"Delete",disabled:!i.canWriteManifests,onClick:i.canWriteManifests?function(){Ie(n)}:null,variant:"link"}])}))),a().createElement(d.Tr,{isExpanded:e.isOpen,ouiaId:"manifestTable/details".concat(t),ouiaSafe:!0},a().createElement(d.Td,{colSpan:c},a().createElement(d.ExpandableRowContent,null,e.details.content))))}))),a().createElement(m.PageSection,{variant:m.PageSectionVariants.light},0===k(t,b)&&t.length>0&&a().createElement(p.qx,{clearFilters:Ce}),!n&&0===t.length&&a().createElement(p.s3,{user:i}),n&&a().createElement(p.qb,null),Le(m.PaginationVariant.bottom))))),a().createElement(F,{uuid:q,name:Y,isOpen:V,handleModalToggle:ke,onSuccess:we}))};var q=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((r=r.apply(e,t||[])).next())}))},W=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},K=function(e){return function(t){return void 0===t&&(t=0),q(void 0,void 0,Promise,(function(){var n,r,a,i,o,c,l,s,u,f,m,d,p;return W(this,(function(h){switch(h.label){case 0:return r=fetch,a=["/api/rhsm/v2/manifests?type=Satellite&offset=".concat(t)],d={},p={},i="Bearer ".concat,[4,e];case 1:return[4,r.apply(void 0,a.concat([(d.headers=(p.Authorization=i.apply("Bearer ",[h.sent()]),p),d)]))];case 2:if(200!=(n=h.sent()).status)throw new Error("Error fetching manifest data: ".concat(n.statusText));return[4,n.json()];case 3:return o=h.sent(),c=o.pagination,l=c.count,s=c.limit,u=o.body,l!==s?[3,5]:(f=t+s,[4,K(e)(f)]);case 4:m=h.sent(),u.push.apply(u,m),h.label=5;case 5:return[2,u]}}))}))}},Y=n(8463),J=n(2112),X="https://access.redhat.com/support",$=window.location.pathname.replace("manifests","inventory"),ee=function(){return a().createElement(m.EmptyState,{variant:m.EmptyStateVariant.large},a().createElement(m.EmptyStateIcon,{icon:J.ZP}),a().createElement(m.Title,{headingLevel:"h2",size:"lg"},"Your account has no Satellite subscriptions"),a().createElement(m.EmptyStateBody,null,a().createElement(m.TextContent,{className:"pf-u-mb-xl"},a().createElement(m.Text,{variant:"small"},"A Satellite subscription is required to create a manifest. Contact support to determine if you need a new subscription. To view recently expired subscriptions, select the"," ",a().createElement("em",null,"Expired")," card in your subscription inventory.")),a().createElement(m.Button,{variant:"primary",component:"a",href:X,target:"_blank"},"Contact support"),a().createElement("br",null),a().createElement(m.Button,{variant:"link",component:"a",href:$},"View subscription inventory")))};const te=function(){var e,t=(e=(0,b.dQ)(),(0,h.useQuery)("manifests",(function(){return function(e){return function(){return q(void 0,void 0,Promise,(function(){return W(this,(function(t){switch(t.label){case 0:return[4,K(e)()];case 1:return[2,(n=t.sent(),n.filter((function(e){return parseInt(e.version)>=6})))]}var n}))}))}}(e)()}))),n=t.isLoading,r=t.isFetching,o=t.error,c=t.data,l=(0,Y.Z)().data;return a().createElement(a().Fragment,null,a().createElement(f,null,a().createElement(m.TextContent,null,a().createElement(m.Text,{component:"h1",className:"pf-c-title"},"Manifests"),a().createElement(m.Text,{component:"p"},"Export subscriptions to your on-premise subscription management application."," ",a().createElement(w,{href:"https://access.redhat.com/documentation/en-us/subscription_central/2023/html/creating_and_managing_manifests_for_a_connected_satellite_server/index"},"Learn more about creating and managing manifests for a connected Satellite Server"),!l.isEntitled&&!n&&0!=(null==c?void 0:c.length)&&a().createElement(m.Alert,{title:"Your account has no Satellite subscriptions",isInline:!0,variant:"info"},"You can view existing manifests for your account, however, an active Satellite subscription is required to create a new manifest."," ",a().createElement("a",{href:X,target:"_blank",rel:"noreferrer"},"Contact support")," ","to determine if you need a new subscription. To view recently expired subscriptions, select the ",a().createElement("em",null,"Expired")," card in your"," ",a().createElement("a",{href:$},"subscription inventory"),".")))),a().createElement(i.ZP,null,a().createElement(a().Fragment,null,n&&!o&&a().createElement(p.qb,null),!n&&!o&&!l.isEntitled&&0==c.length&&a().createElement(ee,null),!n&&!o&&(l.isEntitled||0!=c.length)&&a().createElement(H,{data:c,user:l,isFetching:r}),o&&a().createElement(j.Z,null))))}},4184:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var o=a.apply(null,n);o&&e.push(o)}}else if("object"===i){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var c in n)r.call(n,c)&&n[c]&&e.push(c)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()}}]);
//# sourceMappingURL=../sourcemaps/80.1bd47fb90e1d6e32bbf3da365e6298f2.js.map