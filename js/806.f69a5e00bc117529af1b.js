"use strict";(self.webpackChunksubscription_central=self.webpackChunksubscription_central||[]).push([[806],{1806:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var r=n(2950),a=n.n(r),i=n(334),o=n(6350),l=n(8716),s=n(9173),c=n(3212),u=n(2160),m=n(6189);const d=function(e){var t=e.entitlementsData,n=e.isLoading,i=e.isSuccess,o=e.isError,l=e.entitlementsRowRef;(0,r.useEffect)((function(){(null==l?void 0:l.current)&&(l.current.scrollIntoView({behavior:"smooth",block:"center"}),l.current.focus({preventScroll:!0}))}),[i]);var s=[{title:"Subscription name",transforms:[u.nowrap]},{title:"SKU",transforms:[u.nowrap]},{title:"Contract number",transforms:[u.nowrap]},{title:"Quantity",transforms:[u.nowrap]},{title:"Start date",transforms:[u.nowrap]},{title:"End date",transforms:[u.nowrap]}],c=function(e){return e?e.substr(0,4)+"-"+e.substr(5,2)+"-"+e.substr(8,2):""},d=[];(null==t?void 0:t.value)&&(d=null==t?void 0:t.value.map((function(e){var t=c(e.startDate),n=c(e.endDate);return[e.subscriptionName,e.sku,e.contractNumber,e.entitlementQuantity,t,n]})));var f=[{title:"Remove Subscription",onClick:function(e,t,n){console.log("clicked on Some action, on row: ",t,n)}},{title:"Move Subscription",onClick:function(e,t,n){console.log("clicked on Some action, on row: ",t,n)}}];return a().createElement(a().Fragment,null,n&&!o&&a().createElement("div",{className:"entitlement-list-loading-container"},a().createElement(m.qb,null)),i&&!t.valid&&a().createElement("div",{className:"no-entitlements-reason"},a().createElement("p",{tabIndex:i?0:-1,ref:l},t.reason)),i&&t.valid&&a().createElement("div",{ref:l},a().createElement(u.Table,{"aria-label":"Allocations table",cells:s,rows:d,borders:!1,actions:f,className:"manifests_entitlement-list-table"},a().createElement(u.TableHeader,null),a().createElement(u.TableBody,null))),o&&"Something went wrong.  Please refresh the page and try again.")};var f=n(8767),p=n(6808),h=n.n(p),E=n(5186),v=function(e){return(0,f.useQuery)(["manifestEntitlements",e],(function(){return function(e){var t=h().get("cs_jwt"),n=(0,E.iE)().rhsmAPIBase;return fetch(n+"/management/v1/allocations/"+e+"?include=entitlements",{headers:{Authorization:"Bearer "+t},mode:"cors"}).then((function(e){return e.json()}))}(e)}))};const b=function(e){var t,n=e.uuid,r=e.entitlementsRowRef,i=v(n),o=i.isLoading,l=i.isSuccess,s=i.isError,c=i.data;return a().createElement(d,{isLoading:o,isSuccess:l,isError:s,entitlementsData:null===(t=null==c?void 0:c.body)||void 0===t?void 0:t.entitlementsAttached,entitlementsRowRef:r})};var g=n(4564),w=function(){return(w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};const y=function(e){var t,n=e.scaStatus,r=e.uuid,i="enabled"===n.toLowerCase(),o=(t=(0,f.useQueryClient)(),(0,f.useMutation)((function(e){return n=(t=e).uuid,r=t.newSCAStatus,a=h().get("cs_jwt"),i=(0,E.iE)().rhsmAPIBase,o={simpleContentAccess:r},fetch(i+"/management/v1/allocations/"+n,{method:"PUT",headers:{Authorization:"Bearer "+a},body:JSON.stringify(o)}).then((function(e){if(204!==e.status)throw new Error("Status Code "+e.status+".  Error updating SCA status: "+e.statusText+".  ");return{success:!0,status:e.status}})).catch((function(e){console.error(e)}));var t,n,r,a,i,o}),{onSuccess:function(e,n){if(e){var r=n.uuid,a=n.newSCAStatus;!function(e,t,n){var r=e.getQueryData("manifests").map((function(e){if(e.uuid===t){var r=w({},e);return r.simpleContentAccess=n,r}return e}));e.setQueryData("manifests",r)}(t,r,a),function(e,t,n){var r=e.getQueryData(["manifestEntitlements",t]);if(r){var a={body:w(w({},r.body),{simpleContentAccess:n})};e.setQueryData(["manifestEntitlements",t],a)}}(t,r,a)}}})),l=o.data,s=o.mutate,u=o.isLoading,m=o.isError,d=o.isSuccess,p=function(){!function(e,t){var n="enabled"===t.toLowerCase()?"disabled":"enabled";s({uuid:e,newSCAStatus:n})}(r,n)};return!0===(!0===m||d&&!l)?a().createElement((function(){return a().createElement(a().Fragment,null,a().createElement(g.ZP,{color:"var(--pf-global--danger-color--100)",className:"sca-status-error-icon"}),a().createElement("span",{className:"sca-status-error-msg"},"Something went wrong. Please refresh the page and try again."))}),null):!0===u?a().createElement((function(){return a().createElement(c.Spinner,{size:"lg",className:"sca-status-spinner"})}),null):"disallowed"===n?a().createElement((function(){return a().createElement("p",null,"N/A")}),null):a().createElement((function(){return a().createElement(c.Switch,{id:"sca-status-switch-"+r,"data-testid":"sca-status-switch","aria-label":"SCA Status for this Manifest is "+n,isChecked:i,onChange:p,label:"Enabled",labelOff:"Disabled"})}),null)};var S=n(1369),C=n(470);const k=function(e){var t=e.href,n=e.children;return a().createElement(c.Button,{variant:"link",component:"a",href:t,target:"_blank",isInline:!0,icon:a().createElement(C.ZP,null),iconPosition:"right"},n)},x=function(){return a().createElement(a().Fragment,null,a().createElement(c.Popover,{"aria-label":"Learn more about Simple Content Access",headerContent:"Simple Content Access",bodyContent:a().createElement("p",null,"Simple content access is a set of capabilities that enables a change in the way Red Hat manages its subscription and entitlement enforcement model. When enabled, you are allowed to consume content on your systems without strict entitlement enforcement."),footerContent:a().createElement(k,{href:"https://access.redhat.com/documentation/en-us/subscription_central/2020-10/html/getting_started_with_subscription_watch_with_simple_content_access/assembly-activating-simplecontent#con-what-is-simplecontent_assembly-simplecontent-ctxt"},"Learn more about enabling simple content access on an existing Satellite allocation and manifest")},a().createElement(S.ZP,{className:"sca-more-info-icon","data-testid":"sca-more-info-icon",onClick:function(e){e.stopPropagation()}})))};var I=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},D=function(e){var t=[{title:"Name",transforms:[u.sortable],cellFormatters:[u.expandable]},{title:"Version",transforms:[u.sortable]},{title:a().createElement(a().Fragment,null,"Simple Content Access",a().createElement(x,null)),transforms:[u.sortable,(0,u.cellWidth)(20)]},{title:"UUID",transforms:[u.sortable]}];return!1===e.isSCACapable&&t.splice(2,1),t},A=function(e,t){return e.filter((function(e){return(e.name||"").toLowerCase().includes(t.toLowerCase().trim())||(e.version||"").toLowerCase().includes(t.toLowerCase().trim())||(e.uuid||"").toLowerCase().includes(t.toLowerCase().trim())}))},L=function(e,t){return A(e,t).length},P=function(e,t,n,r,i,o,l,s,m){var d=function(e,t,n,r,a){var i=(n-1)*r,o=i+r;return function(e,t,n){return function(e,t){var n=t.direction,r=t.index-1,a=n===u.SortByDirection.desc?-1:1;return e.sort((function(e,t){var n=e[r].toLowerCase(),i=t[r].toLowerCase();return n<i?-1*a:n>i?1*a:0}))}(function(e,t){return A(e,t).map((function(e){var t=e.simpleContentAccess||"disabled";return parseFloat(e.version)<=6.2&&(t="disallowed"),[e.name,e.version,t,e.uuid]}))}(e,t),n)}(e,t,a).slice(i,o)}(e,n,r,i,m),f=[];return d.forEach((function(e,n){var r=e[3],i=o[r]||!1,u=2*(n+1)-2,m=i?a().createElement(b,{uuid:r,entitlementsRowRef:s[n]}):"",d=function(e,t,n,r){var i=e[0],o=e[1],l=e[2],s=e[3],u=[a().createElement(a().Fragment,{key:"button-"+s},a().createElement(c.Button,{"data-testid":"expand-details-button-"+t,variant:"link",onClick:function(){return n(s,t)}},i)),o,a().createElement(a().Fragment,{key:"scastatusswitch-"+s},a().createElement(y,{scaStatus:l,uuid:s})),s];return!1===r.isSCACapable&&u.splice(2,1),u}(e,n,l,t);f.push({isOpen:i,cells:I([],d)}),f.push({parent:u,fullWidth:!0,noPadding:!0,cells:[{title:m}]})})),f},B=n(5841),T=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}s((r=r.apply(e,t||[])).next())}))},R=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},N=function(e){var t=h().get("cs_jwt"),n=(0,E.iE)().rhsmAPIBase;return fetch(n+"/management/v1/allocations/"+e+"/export",{headers:{Authorization:"Bearer "+t},mode:"cors"}).then((function(e){return e.json()}))},G=function(e,t){return T(void 0,void 0,void 0,(function(){var n,r,a;return R(this,(function(i){switch(i.label){case 0:return n=h().get("cs_jwt"),r=(0,E.iE)().rhsmAPIBase,[4,fetch(r+"/management/v1/allocations/"+e+"/exportJob/"+t,{headers:{Authorization:"Bearer "+n},mode:"cors"})];case 1:return 200!==(a=i.sent()).status?[3,2]:[2,a.json()];case 2:return 202!==a.status&&404!==a.status?[3,4]:[4,(5e3,new Promise((function(e){return setTimeout(e,5e3)})))];case 3:return i.sent(),[2,G(e,t)];case 4:throw new Error("Error fetching status of exported manifest")}}))}))},M=function(e,t){var n=h().get("cs_jwt"),r=(0,E.iE)().rhsmAPIBase;return fetch(r+"/management/v1/allocations/"+e+"/export/"+t,{headers:{Authorization:"Bearer "+n,"Content-type":"application/zip"},mode:"cors"}).then((function(e){return e.blob()}))},F=function(){return(0,f.useMutation)((function(e){return t=e.uuid,T(void 0,void 0,void 0,(function(){var e,n;return R(this,(function(r){switch(r.label){case 0:return[4,N(t)];case 1:return e=r.sent(),[4,G(t,e.body.exportJobID)];case 2:return n=r.sent(),[4,M(t,n.body.exportID)];case 3:return[2,r.sent()]}}))}));var t}))};const _=n(1084).Z,O=function(e){var t=e.isExpanded,n=e.titleRef,i=e.drawerRef,o=e.uuid,l=e.onCloseClick,s=e.exportManifest,u=e.exportManifestButtonIsDisabled,d=e.openCurrentEntitlementsListFromPanel,p=e.deleteManifest,h=v(o),E=h.data,b=h.isLoading,g=h.isFetching,w=h.isSuccess,y=h.isError,S=(0,f.useQueryClient)().getQueryData("user");(0,r.useEffect)((function(){!0===t&&(C(),k())}),[t,w,b]);var C=function(){(null==n?void 0:n.current)&&n.current.scrollIntoView({behavior:"smooth",block:"start"})},k=function(){(null==i?void 0:i.current)&&i.current.focus({preventScroll:!0})},I=function(){var e=E.body,t=e.uuid,n=e.name;s(t,n),l()},D=function(){return a().createElement("div",{className:"manifest-detail-drawer-loading","aria-label":"Loading Manifest Details",tabIndex:b?0:-1,ref:i},a().createElement(m.qb,null))},A=function(){if(!(null==E?void 0:E.body))return a().createElement(m.Bc,null);var e=E.body,t=e.uuid,n=e.name,r=e.version,o=e.createdDate,l=e.createdBy,s=e.lastModified,f=e.entitlementsAttachedQuantity,h=e.simpleContentAccess,v=function(e){return new Date(e).toLocaleString("en-US",{month:"long",year:"numeric",day:"numeric",timeZone:"America/New_York"})};return a().createElement("div",{className:"manifest-details-content"},a().createElement("h3",{tabIndex:w?0:-1,ref:i},n),a().createElement("h4",null,"Details"),a().createElement(c.Grid,null,a().createElement(c.GridItem,{span:6},a().createElement("strong",null,"Name")),a().createElement(c.GridItem,{span:6},n),a().createElement(c.GridItem,{span:6},a().createElement("strong",null,"Type")),a().createElement(c.GridItem,{span:6},"Satellite ",r),a().createElement(c.GridItem,{span:6},a().createElement("strong",null,"UUID")),a().createElement(c.GridItem,{span:6},t)),a().createElement("h4",null,"Subscriptions"),a().createElement(c.Grid,null,a().createElement(c.GridItem,{span:6},a().createElement("strong",null,"Simple content access",a().createElement(x,null))),a().createElement(c.GridItem,{span:6},!0===S.isSCACapable?h:"administratively disabled"),a().createElement(c.GridItem,{span:6},a().createElement("strong",null,"Quantity")),a().createElement(c.GridItem,{span:6},a().createElement(c.Button,{variant:"link",onClick:d,className:"manifest-details-open-entitlements-button"},f))),a().createElement("h4",null,"History"),a().createElement(c.Grid,null,a().createElement(c.GridItem,{span:6},a().createElement("strong",null,"Created")),a().createElement(c.GridItem,{span:6},v(o)),a().createElement(c.GridItem,{span:6},a().createElement("strong",null,"Created by")),a().createElement(c.GridItem,{span:6},l),a().createElement(c.GridItem,{span:6},a().createElement("strong",null,"Last modified date")),a().createElement(c.GridItem,{span:6},v(s))),a().createElement(c.Button,{variant:"tertiary",onClick:I,isDisabled:u},"Export manifest"),a().createElement("p",{className:"manifest-details-delete-text"},"Deleting a subscription allocation is ",a().createElement("strong",null,"STRONGLY")," discouraged. This action should only be taken in extreme circumstances or for debugging purposes"),a().createElement(c.Button,{variant:"tertiary",onClick:function(){p(t)}},"Delete manifest"))};return a().createElement(c.DrawerPanelContent,null,a().createElement(c.DrawerHead,null,a().createElement((function(){return!0===y?a().createElement(m.Bc,null):!0===b||!0===g?a().createElement(D,null):!0===w?a().createElement(A,null):void 0}),null),a().createElement(c.DrawerActions,null,a().createElement(c.DrawerCloseButton,{onClick:function(){l()}}))))};const j=function(e){var t,n=e.handleModalToggle,r=e.onSuccess,i=e.isOpen,o=e.name,l=e.uuid,s=a().useState(!1),u=s[0],m=s[1],d=(0,B.Z)(),p=d.addSuccessNotification,v=d.addErrorNotification,b=(t=(0,f.useQueryClient)(),(0,f.useMutation)((function(e){return function(e){var t=h().get("cs_jwt"),n=(0,E.iE)().rhsmAPIBase;return fetch(n+"/management/v1/allocations/"+e+"?force=true",{method:"DELETE",headers:{Authorization:"Bearer "+t},mode:"cors"}).then((function(e){if(204!=e.status)throw new Error("Status Code "+e.status+".  Error deleting manifest: "+e.statusText+".")}))}(e)}),{onSuccess:function(e,n){t.setQueryData("manifests",(function(e){return e.filter((function(e){return e.uuid!=n}))}))}})),g=b.isError,w=b.isLoading,y=b.isSuccess,S=b.mutate,C=b.reset,k=y||g,x=function(){n(),m(!1)};return y?(r(),p("Manifest "+o+" deleted")):g&&v("Something went wrong. Please try again"),k&&(x(),C()),a().createElement(c.Modal,{isOpen:i,onClose:x,title:w?"Deleting "+o+"...":"Delete "+o,variant:c.ModalVariant.small,titleIconVariant:"warning",actions:w?[]:[a().createElement(c.Button,{key:"cancel",variant:"link",onClick:x},"NO, CANCEL"),a().createElement(c.Button,{key:"confirm",variant:"danger",isDisabled:!u,onClick:function(){return S(l)}},"YES, DELETE")]},w?a().createElement(c.EmptyState,null,a().createElement(c.EmptyStateIcon,{variant:"container",component:c.Spinner})):a().createElement(c.TextContent,null,a().createElement(c.Text,{component:c.TextVariants.p},"Deleting a manifest is STRONGLY discouraged. Deleting a manifest will:"),a().createElement(c.List,null,a().createElement(c.ListItem,null,"Delete all subscriptions that are attached to running hosts."),a().createElement(c.ListItem,null,"Delete all subscriptions attached to activation keys."),a().createElement(c.ListItem,null,"Disable Red Hat Insights."),a().createElement(c.ListItem,null,"Require you to upload the manifest and re-attach subscriptions to hosts and activation keys.")),a().createElement(c.Text,{component:c.TextVariants.p},a().createElement("strong",null,"Caution: this operation is permanent and cannot be undone.")),a().createElement(c.Checkbox,{label:"Are you sure you want to delete this manifest?",isChecked:u,id:"confirmation_checkbox",onChange:function(e,t){m(t.target.checked)}})))};var Q=function(){return(Q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};const U=function(e){var t=e.data,n=e.isFetching,i=e.user,o=(0,r.useState)(1),l=o[0],s=o[1],d=(0,r.useState)(10),f=d[0],p=d[1],h=(0,r.useState)(""),E=h[0],v=h[1],b=(0,r.useState)({index:1,direction:u.SortByDirection.asc}),g=b[0],w=b[1],y=(0,r.useState)({}),S=y[0],C=y[1],k=(0,r.useState)(""),x=k[0],I=k[1],A=(0,r.useState)(!1),T=A[0],R=A[1],N=(0,r.useState)(null),G=N[0],M=N[1],U=(0,r.useState)(!1),V=U[0],Z=U[1],z=(0,r.useState)(""),H=z[0],q=z[1],Y=(0,r.useState)(""),J=Y[0],W=Y[1],K=(0,r.useState)(!1),X=K[0],$=K[1],ee=(0,r.useState)(""),te=ee[0],ne=ee[1],re=(0,r.useState)(""),ae=re[0],ie=re[1],oe=(0,r.useRef)(null),le=(0,r.useRef)(null),se=new Array(10).fill(null).map((function(){return(0,r.useRef)(null)})),ce=(0,B.Z)(),ue=ce.addInfoNotification,me=ce.addSuccessNotification,de=ce.addErrorNotification,fe=F(),pe=fe.data,he=fe.mutate,Ee=fe.isLoading,ve=fe.isSuccess,be=fe.isError,ge=function(){R(!1),I("")},we=function(e,t){p(t),s(1)},ye=function(e,t){s(t),Ie()},Se=function(){v(""),s(1),Ie()},Ce=function(){Z(!V)},ke=function(e){q(e),W(function(e,t){var n;return null===(n=e.find((function(e){return e.uuid==t})))||void 0===n?void 0:n.name}(t,e)),Ce()},xe=function(e,t){var n=Q({},S);n[e]=t,C(n)},Ie=function(){C({})},De=function(e,t){ne(t),$(!0),he({uuid:e});var n=ue("Manifest "+t+" exporting. This may take some time. Please wait.",{hasTimeout:!1});ie(n)};ve&&X&&(me("Manifest "+te+" Exported",{hasTimeout:!1,alertLinkHref:window.URL.createObjectURL(pe),alertLinkText:"Download Manifest",alertLinkIsDownload:!0,keyOfAlertToReplace:ae}),ie(""),$(!1)),be&&X&&(de("Something went wrong. Please refresh the page and try again.",{hasTimeout:!1,keyOfAlertToReplace:ae}),ie(""),$(!1));var Ae=function(e){return void 0===e&&(e=c.PaginationVariant.top),a().createElement(c.Pagination,{isDisabled:n,itemCount:L(t,E),perPage:f,page:l,onSetPage:ye,onPerPageSelect:we,variant:e})},Le=a().createElement(O,{uuid:x,exportManifest:De,exportManifestButtonIsDisabled:Ee,onCloseClick:ge,isExpanded:T,titleRef:oe,drawerRef:le,openCurrentEntitlementsListFromPanel:function(){ge(),xe(x,!0);var e=se[G];(null==e?void 0:e.current)&&e.current.scrollIntoView({behavior:"smooth",block:"center"})},deleteManifest:ke});return a().createElement(a().Fragment,null,0===(null==t?void 0:t.length)&&i.isOrgAdmin&&a().createElement(m.s3,null),((null==t?void 0:t.length)>0||!i.isOrgAdmin)&&a().createElement(c.PageSection,{variant:"light"},a().createElement(c.Drawer,{isExpanded:T},a().createElement(c.DrawerContent,{panelContent:Le},a().createElement(c.DrawerContentBody,null,a().createElement(c.Title,{headingLevel:"h2"},a().createElement("span",{ref:oe},"Manifests"),!n&&a().createElement(c.Badge,{isRead:!0},L(t,E))),a().createElement(c.Flex,{direction:{default:"column",md:"row"},justifyContent:{default:"justifyContentSpaceBetween"}},a().createElement(c.FlexItem,null,a().createElement(c.Split,{hasGutter:!0},t.length>0&&a().createElement(c.SplitItem,{isFilled:!0},a().createElement(c.SearchInput,{placeholder:"Filter by name, version or UUID",value:E,onChange:function(e){v(e),s(1),Ie()},onClear:Se})),!0===i.isOrgAdmin&&a().createElement(c.SplitItem,null,a().createElement(_,null)))),a().createElement(c.FlexItem,{align:{default:"alignRight"}},Ae())),a().createElement(u.Table,{"aria-label":"Satellite Manifest Table",cells:D(i),rows:n?[]:P(t,i,E,l,f,S,(function(e,t){!function(e,t){I(e),M(t),R(!0),(null==oe?void 0:oe.current)&&oe.current.scrollIntoView({behavior:"smooth",block:"start"}),(null==le?void 0:le.current)&&le.current.focus({preventScroll:!0})}(e,t)}),se,g),onCollapse:function(e,t,n,r){var a=r.uuid.title;xe(a,!S[a])},sortBy:g,onSort:function(e,t,n){w({index:t,direction:n}),s(1),Ie()},actions:[{title:"Export",onClick:function(e,t,n){var r=n.cells[0].props.children.props.children,a=n.uuid.title;De(a,r)}},{title:"Delete",onClick:function(e,t,n){ke(n.uuid.title)}}],areActionsDisabled:function(){return Ee}},a().createElement(u.TableHeader,null),a().createElement(u.TableBody,null)),0===L(t,E)&&t.length>0&&a().createElement(m.qx,{clearFilters:Se}),!n&&0===t.length&&a().createElement(m.Ox,null),n&&a().createElement(m.qb,null),Ae(c.PaginationVariant.bottom))))),a().createElement(j,{uuid:H,name:J,isOpen:V,handleModalToggle:Ce,onSuccess:ge}))};var V=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}s((r=r.apply(e,t||[])).next())}))},Z=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},z=function(e){return void 0===e&&(e=0),V(void 0,void 0,void 0,(function(){var t,n,r,a,i,o,l,s;return Z(this,(function(c){switch(c.label){case 0:return t=h().get("cs_jwt"),n=(0,E.iE)().rhsmAPIBase,[4,fetch(n+"/management/v1/allocations?type=Satellite&offset="+e,{headers:{Authorization:"Bearer "+t},mode:"cors"})];case 1:return[4,c.sent().json()];case 2:return r=c.sent(),a=r.pagination,i=a.count,o=a.limit,l=r.body,i!==o?[3,4]:[4,z(e+o)];case 3:s=c.sent(),l.push.apply(l,s),c.label=4;case 4:return[2,l]}}))}))},H=n(167);const q=(0,i.withRouter)((function(){var e=(0,f.useQuery)("manifests",(function(){return V(void 0,void 0,void 0,(function(){return Z(this,(function(e){switch(e.label){case 0:return[4,z()];case 1:return[2,(t=e.sent(),t.filter((function(e){return parseInt(e.version)>=6})))]}var t}))}))})),t=e.isLoading,n=e.isFetching,r=e.error,i=e.data,c=(0,f.useQueryClient)().getQueryData("user");return a().createElement(a().Fragment,null,a().createElement(l.Z,null,a().createElement(s.Z,{title:"Manifests"}),a().createElement("p",null,"Export subscriptions to your on-premise subscription management application")),a().createElement(o.Z,null,a().createElement(a().Fragment,null,t&&!r&&a().createElement(m.qb,null),!t&&!r&&a().createElement(U,{data:i,user:c,isFetching:n}),r&&a().createElement(H.Z,null))))}))}}]);
//# sourceMappingURL=../sourcemaps/806.e39d794c5e3c2a08f2bc.js.map