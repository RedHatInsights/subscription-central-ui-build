(self.webpackChunksubscription_central=self.webpackChunksubscription_central||[]).push([[860],{67073:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var a=n(94015),r=n.n(a),i=n(23645),l=n.n(i)()(r());l.push([e.id,".manifests :root{--ins-color--orange: #ec7a08}.manifests button:focus{outline:none}\n","",{version:3,sources:["webpack://./src/App.scss"],names:[],mappings:"AAAA,iBACM,4BAAoB,CAD1B,wBACgD,YAAY",sourcesContent:[".manifests{\n:root{--ins-color--orange: #ec7a08}button:focus{outline:none}\n\n}"],sourceRoot:""}]);const o=l},18044:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var a=n(77865),r=n.n(a),i=n(334),l=n(43476),o=n(83161),s=n(85186),c=n(41011),u=n(20167);const m=function(e){var t=e.children,n=(0,a.useState)({status:"loading",isOrgAdmin:null}),l=n[0],m=n[1],d={user:l,setUser:m},p=(0,i.useLocation)();return(0,a.useEffect)((function(){m({status:"loading",isOrgAdmin:null}),(0,s.So)().then((function(e){m({status:"loaded",isOrgAdmin:e.identity.user.is_org_admin})})).catch((function(){m({status:"error",isOrgAdmin:null})})).finally((function(){var e,t;null===(t=null===(e=window.insights)||void 0===e?void 0:e.chrome)||void 0===t||t.hideGlobalFilter()}))}),[p.pathname]),r().createElement(c.Z.Provider,{value:d},"loading"===l.status&&r().createElement(o.qb,null),"loaded"===l.status&&t,"error"===l.status&&r().createElement(u.Z,null))};var d=(0,a.lazy)((function(){return Promise.all([n.e(410),n.e(252),n.e(184),n.e(450)]).then(n.bind(n,87450))})),p=(0,a.lazy)((function(){return Promise.all([n.e(252),n.e(184),n.e(582)]).then(n.bind(n,53582))})),f=(0,a.lazy)((function(){return Promise.all([n.e(410),n.e(252),n.e(184),n.e(309)]).then(n.bind(n,92309))})),h=function(){return r().createElement("div",{className:"manifests"},r().createElement(a.Suspense,{fallback:r().createElement(o.qb,null)},r().createElement(m,null,r().createElement(i.Switch,null,r().createElement(i.Route,{exact:!0,path:"/",component:d}),r().createElement(i.Route,{path:"/oops",component:p}),r().createElement(i.Route,{path:"/no-permissions",component:f}),r().createElement(i.Route,null,r().createElement(i.Redirect,{to:"/oops"}))))))},E=(n(14154),n(8738)),v=n(24685),g=n(83215),y=n(88767),b=n(87323),S=new b.S({defaultOptions:{queries:{retry:3,retryDelay:1e4,staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1}}});const w=(0,i.withRouter)((0,l.connect)()((function(e){return(0,a.useEffect)((function(){return(0,E.JH)().register({notifications:g.ee}),insights.chrome.init(),insights.chrome.identifyApp("manifests"),insights.chrome.on("APP_NAVIGATION",(function(e){return undefined.props.history.push("/".concat(e.navId))}))}),[]),r().createElement(y.QueryClientProvider,{client:S},r().createElement(v.ZP,null),r().createElement(h,{childProps:e}))})))},83161:(e,t,n)=>{"use strict";n.d(t,{s3:()=>s,Bc:()=>c.Z,Ox:()=>m,qx:()=>d,qb:()=>p});var a=n(77865),r=n.n(a),i=n(17345),l=n(5917),o=n(20777);const s=function(){return r().createElement(i.EmptyState,{variant:i.EmptyStateVariant.large},r().createElement(i.EmptyStateIcon,{icon:o.wl}),r().createElement(i.Title,{headingLevel:"h2",size:"lg"},"Create a new manifest to export subscriptions"),r().createElement(i.EmptyStateBody,null,"You currently have no manifests displayed. Create a new manifest to export subscriptions from the Red Hat Customer Portal to your on-premise subscription management application."),r().createElement(l.Z,null))};var c=n(55302),u=n(71070);const m=function(){return r().createElement(i.EmptyState,{variant:i.EmptyStateVariant.small},r().createElement(i.EmptyStateIcon,{icon:u.ZP}),r().createElement(i.Title,{headingLevel:"h2",size:"lg"},"No manifests found"),r().createElement(i.EmptyStateBody,null,"No manifests were found under your account."))},d=function(e){var t=e.clearFilters;return r().createElement(i.EmptyState,{variant:i.EmptyStateVariant.small},r().createElement(i.EmptyStateIcon,{icon:u.ZP}),r().createElement(i.Title,{headingLevel:"h2",size:"lg"},"No results found"),r().createElement(i.EmptyStateBody,null,"No results match the filter criteria. Remove all filters or clear all filters to show results."),r().createElement(i.Button,{variant:"link",onClick:t},"Clear all filters"))},p=function(){return r().createElement(i.Bullseye,null,r().createElement(i.Spinner,null))}},55206:(e,t,n)=>{"use strict";n.d(t,{S1:()=>o});var a=n(8738),r=n(68573),i=n.n(r),l=n(84885);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.JH)({},[i(),(0,l.ZP)({errorDescriptionKey:["detail","stack"]})].concat(t))}},14154:(e,t,n)=>{"use strict";var a=n(93379),r=n.n(a),i=n(67073),l=r()(i.default,{insert:"head",singleton:!1});if(!i.default.locals||e.hot.invalidate){var o=i.default.locals;e.hot.accept(67073,(t=>{i=n(67073),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(o,i.default.locals)?(o=i.default.locals,l(i.default)):e.hot.invalidate()}))}e.hot.dispose((function(){l()})),i.default.locals},41011:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=(0,n(77865).createContext)({user:{isOrgAdmin:null,status:"loading"},setUser:function(){}})},5917:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var a=n(77865),r=n.n(a),i=n(17345),l=n(42283),o=n(84564),s=n(34046),c=n(55302),u=n(83161);const m=function(e){var t=e.title;return r().createElement(i.EmptyState,{variant:i.EmptyStateVariant.small},r().createElement(i.Title,{headingLevel:"h3"},t),r().createElement(i.EmptyStateBody,null,r().createElement(u.qb,null)))};var d=n(35451);const p=function(e){var t=e.manifestName,n=e.handleModalToggle;return r().createElement(i.EmptyState,{variant:i.EmptyStateVariant.small},r().createElement(i.EmptyStateIcon,{icon:d.ZP,color:"var(--pf-global--success-color--100)"}),r().createElement(i.Title,{headingLevel:"h3"},"Success"),r().createElement(i.EmptyStateBody,null,r().createElement("h4",null,"Your new manifest, ",r().createElement("strong",null,t),", has been successfully created."),r().createElement(i.Button,{key:"close-window",variant:"primary",onClick:n,style:{marginTop:"20px"}},"Return to page")))};var f=function(){return(f=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};const h=function(e){var t=e.satelliteVersions,n=e.handleModalToggle,u=e.submitForm,d=e.isLoading,h=e.isError,E=e.isSuccess,v=(0,l.cI)({mode:"onBlur"}),g=v.control,y=v.handleSubmit,b=v.formState.errors,S=(0,a.useState)(""),w=S[0],A=S[1],P=function(e){var t=e.satelliteManifestName,n=e.satelliteManifestType;u(t,n),A(t)},T=!1===d&&!1===h&&!1===E;return r().createElement(r().Fragment,null,T&&function(){var e,a;return r().createElement(r().Fragment,null,r().createElement(i.Title,{headingLevel:"h3",size:"2xl"},"Create new manifest"),r().createElement("p",{style:{margin:"30px 0"}},"Creating a new manifest allows you to export subscriptions to your on-premise subscription management application."),r().createElement(i.Form,{isWidthLimited:!0},r().createElement(i.FormGroup,{label:"Name",helperTextInvalid:null===(e=b.satelliteManifestName)||void 0===e?void 0:e.message,helperTextInvalidIcon:r().createElement(o.ZP,null),validated:b.satelliteManifestName?"error":"default",labelIcon:r().createElement(i.Tooltip,{position:"top",content:r().createElement("div",null,"Provide a name that will help you associate this manifest with a specific organization or on-premise subscription management application.")},r().createElement("span",{tabIndex:0,"aria-label":"Provide a name that will help you associate this manifest with a specific\n                organization or on-premise subscription management application."},r().createElement(s.ZP,null))),isRequired:!0,fieldId:"create-satellite-manifest-form-name"},r().createElement(l.Qr,{name:"satelliteManifestName",control:g,defaultValue:"",rules:{required:"Please provide a name for your new manifest",maxLength:{value:99,message:"Your manifest name must be less than 100 characters"},pattern:{value:/^[0-9A-Za-z_.-]*$/,message:"Your manifest name may contain\n                  only numbers, letters, underscores, hyphens, and periods."}},render:function(e){var t=e.field;return r().createElement(i.TextInput,f({isRequired:!0,type:"text",id:"create-satellite-manifest-form-name",placeholder:"Name"},t))}})),r().createElement(i.FormGroup,{label:"Type",helperTextInvalid:null===(a=b.satelliteManifestType)||void 0===a?void 0:a.message,helperTextInvalidIcon:r().createElement(o.ZP,null),validated:b.satelliteManifestType?"error":"default",labelIcon:r().createElement(i.Tooltip,{position:"top",content:r().createElement("div",null,"Due to variation in supported features, it is important to match the type and version of the subscription management application you are using.")},r().createElement("span",{tabIndex:0,"aria-label":"Due to variation in supported features, it is important to match the type and\n              version of the subscription management application you are using."},r().createElement(s.ZP,null))),isRequired:!0,fieldId:"create-satellite-manifest-form-type"},r().createElement(l.Qr,{name:"satelliteManifestType",control:g,rules:{required:"Please select a version for your new manifest"},defaultValue:"",render:function(e){var n=e.field;return r().createElement(i.FormSelect,f({"aria-label":"FormSelect Input",id:"create-satellite-manifest-form-type"},n),r().createElement(i.FormSelectOption,{isDisabled:!0,key:"Select type",value:"",label:"Select type"}),null==t?void 0:t.map((function(e){return r().createElement(i.FormSelectOption,{isDisabled:!1,key:e.value,value:e.value,label:e.description})})))}})),r().createElement(i.ActionGroup,null,r().createElement(i.Button,{key:"confirm",id:"save-manifest-button",variant:"primary",onClick:y(P)},"Save"),r().createElement(i.Button,{key:"cancel",id:"cancel-create-manifest-button",variant:"link",onClick:n},"Cancel"))))}(),d&&r().createElement(m,{title:"Creating manifest..."}),E&&r().createElement(p,{handleModalToggle:n,manifestName:w}),h&&r().createElement(c.Z,null))};var E=n(36808),v=n.n(E),g=n(88767),y=n(85186);const b=function(e){var t,n=e.handleModalToggle,a=e.isModalOpen,l=(0,g.useQuery)("satelliteVersions",(function(){return e=v().get("cs_jwt"),t=(0,y.iE)().rhsmAPIBase,fetch(t+"/management/v1/allocations/versions",{headers:{Authorization:"Bearer "+e},mode:"cors"}).then((function(e){return e.json()})).catch((function(e){console.error("Error fetching Satellite Versions",e)}));var e,t})),o=l.data,s=l.isLoading,c=l.isError,u=(t=(0,g.useQueryClient)(),(0,g.useMutation)((function(e){return n=(t=e).name,a=t.version,r=v().get("cs_jwt"),i=(0,y.iE)().rhsmAPIBase,fetch(i+"/management/v1/allocations?name="+n+"&version="+a,{method:"POST",headers:{Authorization:"Bearer "+r}}).then((function(e){if(200!==e.status)throw new Error("Status Code "+e.status+".  Error creating manifest: "+e.statusText+".  ");return e.json()})).catch((function(e){console.error(e)}));var t,n,a,r,i}),{onSuccess:function(){t.invalidateQueries("manifests")}})),d=u.data,p=u.mutate,f=u.isLoading,E=u.isSuccess,b=u.reset;!1===a&&!0===E&&b();var S=void 0!==d,w=E&&!S||c;return r().createElement(r().Fragment,null,r().createElement(i.Modal,{"aria-label":"Create satellite manifest",variant:i.ModalVariant.medium,isOpen:a,onClose:n},s&&r().createElement(m,{title:"Loading..."}),!s&&r().createElement(h,{satelliteVersions:null==o?void 0:o.body,submitForm:function(e,t){p({name:e,version:t})},isLoading:f,isError:w,isSuccess:S,handleModalToggle:n})))},S=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1],l=function(){n(!t)};return r().createElement(r().Fragment,null,r().createElement(i.Button,{variant:"primary",onClick:l},"Create new manifest"),r().createElement(b,{handleModalToggle:l,isModalOpen:t}))}},55302:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(77865),r=n.n(a),i=n(17345),l=n(84564);const o=function(){return r().createElement(i.EmptyState,{variant:i.EmptyStateVariant.small},r().createElement(i.EmptyStateIcon,{icon:l.ZP,color:"var(--pf-global--danger-color--100)"}),r().createElement(i.Title,{headingLevel:"h3"},"Something went wrong"),r().createElement(i.EmptyStateBody,null,r().createElement("h4",null,"Try refreshing the page. If the problem persists, contact your organization administrator or visit our"," ",r().createElement(i.Button,{variant:"link",component:"a",href:"https://status.redhat.com/",target:"_blank",isInline:!0},"status page")," ","for known outages.")))}},85186:(e,t,n)=>{"use strict";n.d(t,{So:()=>l,iE:()=>o});const a={rhsmAPIBase:"https://api.access.qa.redhat.com"};var r=function(){return(r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};const i={ci:r({},a),qa:r({},a),stage:r(r({},a),{rhsmAPIBase:"https://api.access.stage.redhat.com"}),prod:r(r({},a),{rhsmAPIBase:"https://api.access.redhat.com"})};var l=function(){try{return window.insights.chrome.auth.getUser()}catch(e){throw new Error("Error authenticating user: "+e.message)}},o=function(){var e,t,n=(null===(t=null===(e=null===window||void 0===window?void 0:window.insights)||void 0===e?void 0:e.chrome)||void 0===t?void 0:t.getEnvironment())||"ci";return i[n]}}}]);
//# sourceMappingURL=860.a6ed779e1592e56ee34a.js.map